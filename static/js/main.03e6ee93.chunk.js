(this["webpackJsonpcleanup-pictures"]=this["webpackJsonpcleanup-pictures"]||[]).push([[0],{112:function(e,t,n){},116:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(89),c=n.n(a),i=n(123),s=n(125),o=n(98),l=n(1),u=n.n(l),d=n(2),b=n(10),p=n(101),j=n(84),h=n(94),f=n(77),m=n(37),x=n(25),v=n(3),C={apiKey:"AIzaSyAMvBh0_iWj0wnPW8YUbM6ARSouYL7Iw4M",authDomain:"cleanup.pictures",projectId:"cleanup-pictures",storageBucket:"".concat("cleanup-pictures",".appspot.com"),messagingSenderId:"779551806082",appId:"1:779551806082:web:b30ce45c5c661bd3f59a9b",measurementId:"G-3Y6G6H20DD"},O=Object(r.createContext)(void 0);function g(e){var t=e.children,n=Object(r.useState)(),a=Object(b.a)(n,2),c=a[0],i=a[1];return Object(r.useEffect)((function(){var e=Object(h.a)(C),t=Object(j.a)(e),n=Object(x.f)(e),r="6LfVrt0cAAAAANbnz_mfFP4u4td6GAo7zIIP3qxB";var a=Object(f.c)(e,{provider:new f.a(r),isTokenAutoRefreshEnabled:!0}),c=function(e,n){Object(j.b)(t,e,n)},s=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f.b)(a,!0);case 3:return t=e.sent,e.abrupt("return",t.token);case 7:e.prev=7,e.t0=e.catch(0),c("app_check_failed",{error:e.t0}),p.a(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=Object(m.b)()).currentUser){e.next=3;break}return e.abrupt("return",t.currentUser.getIdToken());case 3:throw new Error("could not get auth token");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();i({app:e,appCheck:a,firestore:n,analytics:t,logEvent:c,getAppCheckToken:s,getAuthToken:o})}),[]),Object(v.jsx)(O.Provider,{value:c,children:t})}function w(){return Object(r.useContext)(O)}var y=n(85),k=Object(r.createContext)(void 0);function L(e){var t=e.children,n=Object(r.useState)(),a=Object(b.a)(n,2),c=a[0],i=a[1],s=w(),o=Object(r.useState)(),l=Object(b.a)(o,2),j=l[0],h=l[1];Object(r.useEffect)((function(){if(null===s||void 0===s?void 0:s.app){var e=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=6;break}return r=Object(m.b)(),e.next=5,Object(m.f)(r);case 5:return e.abrupt("return");case 6:return e.next=8,t.getIdToken();case 8:if(a=e.sent){e.next=11;break}throw new Error("No access token");case 11:return e.next=13,t.getIdTokenResult(!0);case 13:c=e.sent,s=null===(n=c.claims.stripeRole)||void 0===n?void 0:n.toString(),i({firebaseUser:t,accessToken:a,entitlement:s,anonymous:t.isAnonymous}),p.b({id:t.uid,entitlement:s}),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),alert("Error ".concat(e.t0.code,": ").concat(e.t0.message)),p.a(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.b)().onAuthStateChanged(e)}}),[null===s||void 0===s?void 0:s.app]);var f=Object(r.useMemo)((function(){return null===c||void 0===c?void 0:c.firebaseUser.uid}),[c]),C=Object(r.useMemo)((function(){return null===s||void 0===s?void 0:s.firestore}),[s]);function O(){return(O=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new m.a,n=Object(m.b)(),e.next=5,Object(m.h)(n,t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),"auth/popup-closed-by-user"!==e.t0.code&&(alert("Error ".concat(e.t0.code,": ").concat(e.t0.message)),p.a(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function g(){return(g=Object(d.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}throw new Error("Firebase not initialized");case 2:return t=Object(y.b)(Object(y.a)(s.app),"ext-firestore-stripe-payments-createPortalLink"),e.next=5,t({returnUrl:window.location.origin,locale:"auto"});case 5:if(n=e.sent,r=n.data){e.next=9;break}throw new Error("No data returned");case 9:window.location.assign(r.url);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){C&&f&&Object(x.d)(Object(x.c)(C,"customers/".concat(f))).then((function(e){if(e.exists()){var t=e.data();h(null===t||void 0===t?void 0:t.stripeLink)}}))}),[f,C]),Object(r.useEffect)((function(){if(null===s||void 0===s?void 0:s.app){var e=Object(m.b)();if(Object(m.d)(e,window.location.href)){var t=window.localStorage.getItem("emailForSignIn");if(t||(t=window.prompt("Please provide your email for confirmation")),!t)throw new Error("No email");Object(m.g)(e,t,window.location.href).then((function(){window.localStorage.removeItem("emailForSignIn")})).catch((function(e){alert(e.message),p.a(e)}))}}}),[null===s||void 0===s?void 0:s.app]),Object(v.jsx)(k.Provider,{value:{user:c,signInWithGoogle:function(){return O.apply(this,arguments)},signOut:function(){return Object(m.b)().signOut()},openPortal:function(){return g.apply(this,arguments)},hasPortal:function(){return void 0!==j},isPro:function(){return"pro"===(null===c||void 0===c?void 0:c.entitlement)}},children:t})}function N(){return Object(r.useContext)(k)}var E=new URLSearchParams(window.location.search),S=720,H=parseInt(E.get("hd_downscale")||"1440",10),M=n(120);function Z(e){var t=e.children,n=e.className,a=e.disabled,c=e.icon,i=e.primary,s=e.onClick,o=e.onDown,l=e.onUp,u=Object(r.useState)(!1),d=Object(b.a)(u,2),p=d[0],j=d[1],h=Object(r.useRef)(),f="";return i&&!a&&(f="bg-primary hover:bg-black hover:text-white"),i&&a&&(f="bg-primary"),p&&(f="bg-primary text-white"),i||p||(f="hover:bg-primary"),Object(v.jsxs)("div",{ref:function(e){e&&(h.current=e)},role:"button",onKeyDown:function(){},onClick:function(){var e;null===(e=h.current)||void 0===e||e.blur(),null===s||void 0===s||s()},onPointerDown:function(e){j(!0),null===o||void 0===o||o(e.nativeEvent)},onPointerUp:function(e){j(!1),null===l||void 0===l||l(e.nativeEvent)},tabIndex:-1,className:["inline-flex py-3 rounded-xl cursor-pointer",t?"space-x-3 px-5":"px-3 sm:px-5",f,a?"pointer-events-none opacity-50":"","justify-center items-center",n].join(" "),children:[c,Object(v.jsx)("span",{className:"whitespace-nowrap select-none",children:t})]})}var V=n(29);function P(e){var t=e.children,n=e.onClose,a=e.className,c=Object(r.useRef)(null);return Object(M.a)(c,(function(){null===n||void 0===n||n()})),Object(v.jsx)("div",{className:["fixed top-0 left-0 w-full h-full flex justify-center items-center","z-20","bg-gray-300 bg-opacity-40 backdrop-filter backdrop-blur-md"].join(" "),children:Object(v.jsxs)("div",{ref:c,className:"bg-white max-w-4xl relative rounded-md shadow-md ".concat(a||"p-8 sm:p-12"),children:[Object(v.jsx)(Z,{icon:Object(v.jsx)(V.m,{className:"w-6 h-6"}),className:["absolute right-4 top-4 rounded-full bg-gray-100 w-10 h-10","flex justify-center items-center py-0 px-0 sm:px-0"].join(" "),onClick:n}),t]})})}function F(e){var t=e.onClose,n=e.onDownscale,a=e.onUpgrade,c=e.image,i=Object(r.useRef)(null);Object(M.a)(i,t);var s=Object(r.useMemo)((function(){var e=S;return c.width>c.height?{height:Math.round(c.height*(e/c.width)),width:e}:{width:Math.round(c.width*(e/c.height)),height:e}}),[c.width,c.height]),o=s.width,l=s.height;return Object(v.jsx)(P,{onClose:t,className:"w-full sm:w-auto h-full sm:h-auto p-0 sm:p-0",children:Object(v.jsxs)("div",{className:"flex-1 px-4 pt-6 sm:p-8 flex flex-col justify-between h-full",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{className:"text-xl",children:"This is an HD Image"}),Object(v.jsx)("p",{className:"text-xs pb-4 mt-4 opacity-50",children:"Upgrade to Pro to keep the original quality, or downscale to continue for free."})]}),Object(v.jsxs)("div",{className:"flex justify-evenly items-end space-x-4 pt-4",children:[Object(v.jsxs)("div",{className:"flex flex-col items-center justify-center text-center space-y-4",children:[Object(v.jsx)("img",{src:c.src,className:"w-auto h-20 sm:h-32",alt:""}),Object(v.jsxs)("p",{className:"pb-4 text-xs opacity-50",children:[o," x ",l]}),Object(v.jsx)(Z,{className:"hidden sm:block bg-gray-200",onClick:n,children:"Continue with SD"})]}),Object(v.jsxs)("div",{className:"flex flex-col items-center justify-center text-center space-y-4",children:[Object(v.jsx)("img",{src:c.src,className:"w-auto h-40 sm:h-64",alt:""}),Object(v.jsxs)("p",{className:"pb-4 text-xs opacity-50",children:[c.width," x ",c.height]}),Object(v.jsx)(Z,{primary:!0,className:"hidden sm:block",onClick:a,children:"Try Pro 3 days free"})]})]}),Object(v.jsxs)("div",{className:"sm:hidden flex flex-col space-y-4 pb-4",children:[Object(v.jsx)(Z,{className:"bg-gray-200 h-16",onClick:n,children:"Continue with SD"}),Object(v.jsx)(Z,{primary:!0,className:"h-16",onClick:a,children:"Try Pro 3 days free"})]})]})})}function I(){return Object(v.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(v.jsx)("path",{d:"M16.8502 7.468C16.9522 8.014 17.0082 8.586 17.0082 9.184C17.0082 13.852 13.8832 17.172 9.16321 17.172C4.64821 17.172 0.991211 13.515 0.991211 9C0.991211 4.485 4.64821 0.827999 9.16321 0.827999C11.3702 0.827999 13.2132 1.64 14.6282 2.958L12.3242 5.262V5.257C11.4662 4.44 10.3782 4.021 9.16321 4.021C6.46621 4.021 4.27521 6.299 4.27521 8.996C4.27521 11.692 6.46621 13.976 9.16321 13.976C11.6092 13.976 13.2742 12.576 13.6172 10.656H9.16321V7.469L16.8502 7.468Z",fill:"currentColor"})})}function D(e){for(var t=e.numCircles,n=e.circleSize,a=e.color,c=n||8,i=[],s=0;s<(t||3);s+=1)i.push(0);var o=Object(r.useState)(i),l=Object(b.a)(o,1)[0];return Object(v.jsx)("div",{className:["flex flex-row space-x-2",a||"text-gray-400 dark:text-gray-500"].join(" "),children:l.map((function(e,t){return Object(v.jsx)("svg",{width:c,height:c,viewBox:"0 0 ".concat(c," ").concat(c),style:{animation:"wait 0.5s linear ".concat(t/16,"s infinite")},className:"fill-current",children:Object(v.jsx)("circle",{r:c/2,cx:c/2,cy:c/2})},t)}))})}function R(e){var t=e.className,n=w(),r=N();return Object(v.jsxs)("div",{className:["w-full flex flex-col space-y-5",t].join(" "),children:[Object(v.jsx)(Z,{primary:!0,onClick:function(){null===n||void 0===n||n.logEvent("upgrade_sign_in"),null===r||void 0===r||r.signInWithGoogle()},icon:Object(v.jsx)("div",{className:"flex items-center",children:Object(v.jsx)(I,{})}),className:"justify-center",children:"Continue with Google"}),Object(v.jsxs)("div",{className:"flex items-center space-x-4",children:[Object(v.jsx)("span",{className:"flex-1 h-1 border-b border-gray-300"}),Object(v.jsx)("span",{children:"or"}),Object(v.jsx)("span",{className:"flex-1 h-1 border-b border-gray-300"})]}),Object(v.jsx)(U,{})]})}function U(){var e=Object(r.useState)(window.localStorage.getItem("emailForSignIn")||void 0),t=Object(b.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),i=Object(b.a)(c,2),s=i[0],o=i[1],l=Object(r.useState)(!1),j=Object(b.a)(l,2),h=j[0],f=j[1],x=w();function C(){return(C=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return t={url:"".concat(window.location.origin,"?upgrade=select"),handleCodeInApp:!0},e.prev=3,f(!0),e.next=7,Object(m.e)(Object(m.b)(),n,t);case 7:o(!0),f(!1),window.localStorage.setItem("emailForSignIn",n),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(3),alert(e.t0.message),p.a(e.t0),f(!1);case 17:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}return h?Object(v.jsx)("span",{className:"flex justify-center",children:Object(v.jsx)(D,{})}):s?Object(v.jsxs)("span",{className:"inline-flex space-x-4",children:[Object(v.jsx)(V.e,{className:"text-green-500 w-6 h-6"}),Object(v.jsxs)("span",{children:["Sign-in link sent to ",n," (check your spams folder)"]})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("input",{autoComplete:"email",className:"px-4 py-3",id:"email",placeholder:"Email",type:"email",name:"email",defaultValue:n,onChange:function(e){return a(e.target.value)}}),Object(v.jsx)(Z,{onClick:function(){null===x||void 0===x||x.logEvent("upgrade_sign_in_link"),function(){C.apply(this,arguments)}()},className:"border-2 border-black border-opacity-50 justify-center",children:"Get a sign-in link by email"})]})}function _(e){var t=e.onClose,n=Object(r.useRef)(null),a=N();return Object(r.useEffect)((function(){(null===a||void 0===a?void 0:a.user)&&!a.user.anonymous&&t()}),[a,t]),Object(M.a)(n,(function(){t()})),Object(v.jsx)(P,{onClose:t,className:"h-auto p-0 sm:p-0",children:Object(v.jsx)("div",{className:"h-full sm:h-auto flex sm:flex-row items-center",children:Object(v.jsxs)("div",{className:"sm:flex-1 bg-gray-100 p-4 sm:p-12 sm:flex sm:flex-col sm:items-center sm:justify-center",children:[Object(v.jsx)("h1",{className:"text-xl mb-8",children:"Sign in"}),Object(v.jsx)(R,{})]})})})}var A=n(128);function T(){return(T=Object(d.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(x.b)(Object(x.f)(),"customers",t,"checkout_sessions"),e.next=3,Object(x.a)(r,{price:n,success_url:"".concat(window.location.origin,"?upgrade=success"),cancel_url:"".concat(window.location.origin,"?upgrade=cancel")});case 3:a=e.sent,Object(x.h)(a,(function(e){var t=e.data();if(!t)throw new Error("No checkout session");t.error&&alert("An error occured: ".concat(t.error.message)),t.url&&window.location.assign(t.url)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){var t=e.className;return Object(v.jsxs)("svg",{width:"687",height:"157",viewBox:"0 0 687 157",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[Object(v.jsx)("path",{d:"M71.2906 94.0164L106.009 56.0166H152.3L108.113 120.405H62.874L71.2906 94.0164Z",fill:"white",stroke:"black"}),Object(v.jsx)("path",{d:"M49.3997 98.1287L38.158 100.046C36.8642 100.268 35.9918 101.497 36.2142 102.796C36.3183 103.443 36.682 103.985 37.176 104.335C37.6725 104.692 38.3061 104.857 38.9545 104.75L50.1972 102.831C51.49 102.611 52.3646 101.379 52.1452 100.082C51.9264 98.781 50.6971 97.9118 49.3997 98.1287Z",fill:"black"}),Object(v.jsx)("path",{d:"M119.428 43.2439C119.954 42.933 120.361 42.4201 120.525 41.779L123.359 30.6932C123.683 29.4199 122.915 28.1184 121.647 27.7921C120.376 27.4662 119.079 28.2345 118.756 29.5095L115.922 40.5953C115.595 41.8706 116.364 43.1669 117.634 43.4964C118.266 43.6578 118.908 43.5509 119.428 43.2439Z",fill:"black"}),Object(v.jsx)("path",{d:"M80.0951 47.7105C80.7033 48.875 82.1395 49.3251 83.2998 48.7129C84.4642 48.1019 84.9109 46.6613 84.3041 45.4945L79.0064 35.3607C78.3941 34.1951 76.9616 33.7442 75.7939 34.3579C74.6303 34.9727 74.1869 36.4106 74.7974 37.5766L80.0951 47.7105Z",fill:"black"}),Object(v.jsx)("path",{d:"M47.9504 67.8598L58.6814 71.7365C59.9134 72.1831 61.2725 71.5424 61.7239 70.3013C62.1695 69.0614 61.529 67.6976 60.2895 67.2501L49.5627 63.3701C48.327 62.9212 46.9675 63.5656 46.5147 64.8028C46.071 66.0429 46.7146 67.4128 47.9504 67.8598Z",fill:"black"}),Object(v.jsx)("path",{d:"M154.982 52.545C154.546 51.9798 153.867 51.6418 153.154 51.6418H107.236C106.821 51.6418 106.424 51.7571 106.072 51.975L105.991 51.9071L67.298 92.9503L66.8857 93.4161L66.9376 93.4698C66.8511 93.6214 66.7865 93.7777 66.744 93.9403L59.5659 120.817C59.385 121.507 59.5329 122.255 59.9625 122.822C60.3985 123.387 61.0815 123.725 61.7913 123.725H107.712C108.447 123.725 109.098 123.414 109.775 122.735L147.54 82.5967C147.663 82.4657 148.084 81.8609 148.201 81.4267L155.379 54.5488C155.563 53.8604 155.415 53.1151 154.982 52.545ZM105.941 119.102H64.7925L70.7368 96.852H111.885L105.941 119.102ZM114.262 92.2287H74.3187L108.229 56.2652H148.168L114.262 92.2287Z",fill:"black"}),Object(v.jsx)("path",{d:"M239.523 93.581C238.15 98.5037 235.618 102.101 231.926 104.373C228.281 106.598 223.974 107.71 219.004 107.71C214.223 107.71 210.105 106.763 206.65 104.87C203.242 102.929 200.615 100.16 198.769 96.563C196.923 92.9657 196 88.6347 196 83.57C196 78.5053 196.923 74.1743 198.769 70.577C200.615 66.9797 203.242 64.2343 206.65 62.341C210.105 60.4003 214.2 59.43 218.933 59.43C223.808 59.43 228.068 60.4713 231.713 62.554C235.358 64.6367 237.772 67.9027 238.955 72.352L228.234 76.683C227.571 73.7957 226.483 71.8077 224.968 70.719C223.501 69.583 221.631 69.015 219.359 69.015C215.951 69.015 213.277 70.2457 211.336 72.707C209.443 75.1683 208.496 78.7893 208.496 83.57C208.496 88.3507 209.395 91.9717 211.194 94.433C213.04 96.8943 215.785 98.125 219.43 98.125C221.702 98.125 223.619 97.5097 225.181 96.279C226.79 95.001 227.879 93.0603 228.447 90.457L239.523 93.581Z",fill:"black"}),Object(v.jsx)("path",{d:"M257.391 56.448V94.93C257.391 96.492 257.651 97.6043 258.172 98.267C258.693 98.9297 259.568 99.261 260.799 99.261C261.509 99.261 262.101 99.2137 262.574 99.119C263.047 99.0243 263.615 98.8823 264.278 98.693L263.497 105.935C262.645 106.456 261.533 106.882 260.16 107.213C258.787 107.544 257.438 107.71 256.113 107.71C252.326 107.71 249.581 106.834 247.877 105.083C246.173 103.332 245.321 100.468 245.321 96.492V56.448H257.391Z",fill:"black"}),Object(v.jsx)("path",{d:"M286.015 107.71C280.098 107.71 275.412 106.101 271.957 102.882C268.549 99.6633 266.845 95.1193 266.845 89.25C266.845 85.3687 267.626 82.0553 269.188 79.31C270.797 76.5173 272.974 74.411 275.72 72.991C278.512 71.5237 281.755 70.79 285.447 70.79C289.186 70.79 292.357 71.5237 294.961 72.991C297.611 74.411 299.623 76.399 300.996 78.955C302.368 81.4637 303.055 84.351 303.055 87.617C303.055 88.5163 303.007 89.392 302.913 90.244C302.865 91.0487 302.818 91.735 302.771 92.303H278.56C278.891 94.7643 279.696 96.5393 280.974 97.628C282.252 98.6693 283.932 99.19 286.015 99.19C287.813 99.19 289.233 98.835 290.275 98.125C291.363 97.415 292.168 96.421 292.689 95.143L302.345 98.338C301.682 100.373 300.522 102.101 298.866 103.521C297.256 104.894 295.316 105.935 293.044 106.645C290.819 107.355 288.476 107.71 286.015 107.71ZM285.447 79.239C281.613 79.239 279.341 81.44 278.631 85.842H291.624C291.103 81.44 289.044 79.239 285.447 79.239Z",fill:"black"}),Object(v.jsx)("path",{d:"M329.616 84.493C329.616 82.8363 329.143 81.5347 328.196 80.588C327.297 79.594 326.066 79.097 324.504 79.097C322.942 79.097 321.593 79.4993 320.457 80.304C319.368 81.0613 318.611 82.434 318.185 84.422L307.961 82.008C308.624 78.6 310.375 75.8783 313.215 73.843C316.055 71.8077 320.055 70.79 325.214 70.79C330.421 70.79 334.444 71.9497 337.284 74.269C340.171 76.541 341.615 79.878 341.615 84.28V97.273C341.615 99.119 342.443 100.042 344.1 100.042C344.952 100.042 345.638 99.9473 346.159 99.758L345.449 106.645C344.029 107.308 342.301 107.639 340.266 107.639C338.041 107.639 336.124 107.213 334.515 106.361C332.906 105.462 331.817 104.113 331.249 102.314C330.255 104.16 328.669 105.533 326.492 106.432C324.362 107.284 322.09 107.71 319.676 107.71C316.031 107.71 313.12 106.882 310.943 105.225C308.813 103.521 307.748 101.083 307.748 97.912C307.748 95.356 308.505 93.2497 310.02 91.593C311.582 89.889 314.02 88.7057 317.333 88.043L329.616 85.487V84.493ZM319.676 96.776C319.676 97.8173 320.055 98.5983 320.812 99.119C321.569 99.6397 322.469 99.9 323.51 99.9C325.119 99.9 326.539 99.4267 327.77 98.48C329.001 97.486 329.616 95.9477 329.616 93.865V91.877L323.865 93.084C322.445 93.368 321.38 93.794 320.67 94.362C320.007 94.8827 319.676 95.6873 319.676 96.776Z",fill:"black"}),Object(v.jsx)("path",{d:"M350.923 107V71.5H361.715L362.07 78.671C363.159 76.0677 364.744 74.1033 366.827 72.778C368.91 71.4527 371.371 70.79 374.211 70.79C377.856 70.79 380.814 71.855 383.086 73.985C385.358 76.115 386.494 79.239 386.494 83.357V107H374.424V86.552C374.424 84.0907 373.951 82.3867 373.004 81.44C372.057 80.4933 370.85 80.02 369.383 80.02C367.632 80.02 366.117 80.6353 364.839 81.866C363.608 83.0967 362.993 85.203 362.993 88.185V107H350.923Z",fill:"black"}),Object(v.jsx)("path",{d:"M406.95 107.71C403.353 107.71 400.418 106.74 398.146 104.799C395.874 102.858 394.738 99.6633 394.738 95.214V71.5H406.808V92.374C406.808 94.646 407.258 96.2317 408.157 97.131C409.057 98.0303 410.335 98.48 411.991 98.48C413.695 98.48 415.139 97.8647 416.322 96.634C417.553 95.356 418.168 93.3207 418.168 90.528V71.5H430.238V107H419.446L419.091 100.326C417.955 102.835 416.37 104.704 414.334 105.935C412.299 107.118 409.838 107.71 406.95 107.71Z",fill:"black"}),Object(v.jsx)("path",{d:"M438.91 121.91V71.5H449.773L450.128 78.671C451.122 76.3043 452.613 74.411 454.601 72.991C456.637 71.5237 459.027 70.79 461.772 70.79C466.127 70.79 469.63 72.3993 472.28 75.618C474.978 78.8367 476.327 83.3333 476.327 89.108C476.327 94.9773 474.955 99.545 472.209 102.811C469.511 106.077 465.985 107.71 461.63 107.71C459.074 107.71 456.897 107.095 455.098 105.864C453.3 104.586 451.927 102.929 450.98 100.894V121.91H438.91ZM457.512 98.835C459.595 98.835 461.228 98.0777 462.411 96.563C463.595 95.001 464.186 92.5633 464.186 89.25C464.186 85.9367 463.595 83.5227 462.411 82.008C461.275 80.446 459.666 79.665 457.583 79.665C455.548 79.665 453.939 80.4933 452.755 82.15C451.572 83.7593 450.98 86.126 450.98 89.25C450.98 92.232 451.548 94.575 452.684 96.279C453.82 97.983 455.43 98.835 457.512 98.835Z",fill:"black"}),Object(v.jsx)("path",{d:"M526.105 60.14C531.785 60.14 536.21 61.5127 539.382 64.258C542.6 66.956 544.21 70.79 544.21 75.76C544.21 80.73 542.6 84.5877 539.382 87.333C536.21 90.031 531.785 91.38 526.105 91.38H516.804V107H504.592V60.14H526.105ZM524.188 82.221C529.347 82.221 531.927 80.0673 531.927 75.76C531.927 71.4527 529.347 69.299 524.188 69.299H516.804V82.221H524.188Z",fill:"black"}),Object(v.jsx)("path",{d:"M551.165 107V71.5H561.815L562.312 79.168C563.164 76.5647 564.466 74.5293 566.217 73.062C568.016 71.5473 570.312 70.79 573.104 70.79C574.004 70.79 574.761 70.8847 575.376 71.074C576.039 71.216 576.56 71.3817 576.938 71.571L575.731 81.511C575.258 81.369 574.643 81.227 573.885 81.085C573.175 80.943 572.3 80.872 571.258 80.872C569.081 80.872 567.188 81.5583 565.578 82.931C564.016 84.3037 563.235 86.3627 563.235 89.108V107H551.165Z",fill:"black"}),Object(v.jsx)("path",{d:"M598.155 70.79C601.894 70.79 605.16 71.5237 607.953 72.991C610.793 74.4583 612.994 76.5647 614.556 79.31C616.165 82.0553 616.97 85.3687 616.97 89.25C616.97 93.1313 616.165 96.4447 614.556 99.19C612.994 101.935 610.793 104.042 607.953 105.509C605.16 106.976 601.894 107.71 598.155 107.71C594.463 107.71 591.197 106.976 588.357 105.509C585.564 104.042 583.363 101.935 581.754 99.19C580.192 96.4447 579.411 93.1313 579.411 89.25C579.411 85.3687 580.192 82.0553 581.754 79.31C583.363 76.5647 585.564 74.4583 588.357 72.991C591.197 71.5237 594.463 70.79 598.155 70.79ZM598.155 79.381C596.072 79.381 594.439 80.162 593.256 81.724C592.12 83.2387 591.552 85.7473 591.552 89.25C591.552 92.7053 592.12 95.214 593.256 96.776C594.439 98.338 596.072 99.119 598.155 99.119C600.285 99.119 601.918 98.338 603.054 96.776C604.237 95.214 604.829 92.7053 604.829 89.25C604.829 85.7473 604.237 83.2387 603.054 81.724C601.918 80.162 600.285 79.381 598.155 79.381Z",fill:"black"})]})}var B=n(129);function W(e){var t=e.prices,n=e.selectedPriceId,r=e.onSelectionChange;return Object(v.jsx)(B.a,{className:"my-4 space-y-3",value:n,onChange:r,children:t.map((function(e){return Object(v.jsx)(B.a.Option,{value:e.id,children:function(t){var n=t.checked;return Object(v.jsx)("div",{className:[n?"bg-gray-200":"border-opacity-10","border-black border-4 px-3 py-3 rounded-md"].join(" "),children:Object(v.jsxs)("div",{className:"flex items-center space-x-4",children:[Object(v.jsx)("div",{className:["rounded-full w-5 h-5 border-4 ",n?"border-primary bg-black":"border-black border-opacity-10"].join(" ")}),"year"===e.interval&&Object(v.jsx)("span",{className:"text-2xl line-through opacity-20",children:"$60"}),Object(v.jsxs)("span",{className:"text-2xl",children:["$",Math.round(e.amount)]}),Object(v.jsxs)("span",{className:"whitespace-nowrap",children:["1 ",e.interval]}),"year"===e.interval&&Object(v.jsxs)("span",{className:"bg-primary px-2 py-1 text-sm rounded-full",children:["$",Math.round(e.amount/12),"/month"]})]})})}},e.id)}))})}function X(e){var t=e.onClose,n=e.screen,a=e.isProUser,c=Object(r.useRef)(null),i=w();return Object(M.a)(c,(function(){t()})),Object(r.useEffect)((function(){a&&"success"!==n&&t()}),[n,a,t]),Object(r.useEffect)((function(){"success"===n&&(null===i||void 0===i||i.logEvent("upgrade_success"))}),[i,n]),"success"===n?Object(v.jsx)(P,{onClose:t,children:Object(v.jsxs)("div",{className:"text-center",children:[Object(v.jsx)(z,{className:"h-20"}),Object(v.jsxs)("div",{className:"pt-8 pb-10",children:[Object(v.jsx)("h2",{className:"text-xl",children:"Upgrade successful!"}),Object(v.jsx)("p",{children:"Congratulations, you now have access to Cleanup Pro :)"})]}),Object(v.jsx)(Z,{primary:!0,onClick:t,children:"Close"})]})}):Object(v.jsx)(P,{onClose:t,className:"h-full sm:h-auto p-0 sm:p-0",children:Object(v.jsxs)("div",{className:"h-full sm:h-auto flex flex-col sm:flex-row",children:[Object(v.jsxs)("div",{className:"flex-1 px-4 pt-12 sm:p-12 flex flex-col justify-center",children:[Object(v.jsx)("div",{className:"flex items-center rounded-md overflow-hidden",style:{maxHeight:"25vh"},children:Object(v.jsxs)("video",{style:{transform:"scale(1.01, 1.01)"},autoPlay:!0,muted:!0,loop:!0,playsInline:!0,children:[Object(v.jsx)("source",{src:"https://storage.googleapis.com/cleanup-pictures.appspot.com/demo_pro.mp4",type:"video/mp4"}),Object(v.jsx)("track",{kind:"captions"})]})}),Object(v.jsx)("p",{className:"pb-4 mt-4",children:"Upgrade now to enable high resolution with no compression (vs 720p max for the free version)."})]}),Object(v.jsx)("div",{className:"sm:flex-1 bg-gray-100 p-4 sm:p-12 sm:flex sm:items-center sm:justify-center",children:Object(v.jsx)(Y,{})})]})})}function Y(){var e=N(),t=function(){var e=w(),t=Object(r.useState)(),n=Object(b.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){if(e){var t=Object(x.f)(e.app),n=Object(x.i)(Object(x.b)(t,"products"),Object(x.j)("active","==",!0));Object(x.e)(n).then((function(e){Promise.all(e.docs.map(function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data(),r={id:t.id,name:n.name,role:n.role,prices:[]},e.next=4,Object(x.e)(Object(x.i)(Object(x.b)(t.ref,"prices"),Object(x.j)("active","==",!0)));case 4:return e.sent.docs.forEach((function(e){var t=e.data(),n={id:e.id,interval:t.interval,currency:t.currency,amount:t.unit_amount/100,trial:t.trial_period_days,active:t.active};r.prices.push(n)})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){c(e)}))}))}}),[e]),a}(),n=Object(r.useState)(!1),a=Object(b.a)(n,2),c=a[0],i=a[1],s=w();return c?Object(v.jsx)("span",{className:"flex justify-center",children:Object(v.jsx)(D,{})}):(null===e||void 0===e?void 0:e.user)&&!e.user.anonymous?Object(v.jsx)(G,{products:t,onCheckout:function(t){if(null===s||void 0===s||s.logEvent("upgrade_checkout",{priceId:t}),!(null===e||void 0===e?void 0:e.user))throw new Error("no user");var n=e.user.firebaseUser.uid;i(!0),function(e,t){T.apply(this,arguments)}(n,t)}}):Object(v.jsx)(R,{})}function G(e){var t,n=e.products,a=e.onCheckout,c=Object(r.useState)(),i=Object(b.a)(c,2),s=i[0],o=i[1],l=Object(A.a)();if(Object(r.useEffect)((function(){if(null===n||void 0===n?void 0:n.length){var e=n.find((function(e){return"pro"===e.role}));if((null===e||void 0===e?void 0:e.prices.length)&&!s){var t=e.prices.find((function(e){return"year"===e.interval}));if(!t)return;o(t.id)}}}),[n,s]),!(null===n||void 0===n?void 0:n.length))return Object(v.jsx)(D,{});var u=null===n||void 0===n?void 0:n.find((function(e){return"pro"===e.role}));return(null===u||void 0===u?void 0:u.prices)&&s?Object(v.jsxs)("div",{className:"flex flex-col",children:[(l.width>640||l.height>550)&&Object(v.jsx)("span",{className:"text-lg",children:"Try Cleanup Pro"}),Object(v.jsx)(W,{prices:null===u||void 0===u?void 0:u.prices,selectedPriceId:s,onSelectionChange:function(e){return o(e)}}),Object(v.jsxs)(Z,{primary:!0,onClick:function(){return a(s)},className:"justify-center py-4",children:["Start ",null===(t=u.prices.find((function(e){return e.id===s})))||void 0===t?void 0:t.trial," days free trial"]}),Object(v.jsx)("span",{className:"text-center opacity-50 text-xs mt-3",children:"Cancel anytime"})]}):Object(v.jsx)("p",{children:"Could not load prices"})}var K=n(13),$=n(7);function q(e){for(var t=e.split(",")[0].split(":")[1].split(";")[0],n=atob(e.split(",")[1]),r=[],a=0;a<n.length;a+=1)r.push(n.charCodeAt(a));return new Blob([new Uint8Array(r)],{type:t})}function J(e){var t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=e.name,n.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),setTimeout((function(){n.remove()}),100)}function Q(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(d.a)(u.a.mark((function e(t){var n,r,a,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={files:[t]},r=navigator,a=r.canShare&&r.canShare(n),c=navigator.userAgent||navigator.vendor,i=/android|iPad|iPhone|iPod/i.test(c),!a||!i){e.next=19;break}return e.prev=7,e.next=10,navigator.share(n);case 10:return e.abrupt("return",!0);case 13:if(e.prev=13,e.t0=e.catch(7),"AbortError"!==e.t0.name){e.next=17;break}return e.abrupt("return",!0);case 17:return"NotAllowedError"!==e.t0.name&&p.a(e.t0),e.abrupt("return",!1);case 19:return e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e,null,[[7,13]])})))).apply(this,arguments)}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.toBlob((function(t){if(!t)throw new Error("Could not convert canvas to blob");e(t)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e,t){return new Promise((function(n,r){var a=e.src,c=e;c.onload=n,c.onerror=function(e){c.src=a,r(e)},c.src=t}))}function ae(e){var t=Object(r.useState)(),n=Object(b.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){if(e){var t=new Image;return t.onload=function(){c(t)},t.src=URL.createObjectURL(e),function(){t.onload=null}}c(void 0)}),[e]),a}function ce(e,t){return ie.apply(this,arguments)}function ie(){return(ie=Object(d.a)(u.a.mark((function e(t,n){var r,a,c,i,s,o,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(t);case 2:if(a=e.sent,c=document.createElement("canvas"),i=a.width,s=a.height,i>s?i>n&&(s*=n/i,i=n):s>n&&(i*=n/s,s=n),i!==a.width||s!==a.height){e.next=8;break}return e.abrupt("return",{file:t,resized:!1,originalWidth:a.width,originalHeight:a.height});case 8:if(c.width=i,c.height=s,c.getContext("2d")){e.next=13;break}throw new Error("could not get context");case 13:return null===(r=c.getContext("2d"))||void 0===r||r.drawImage(a,0,0,i,s),o=c.toDataURL("image/jpeg"),l=q(o),d=new File([l],t.name,{type:t.type}),e.abrupt("return",{file:d,resized:!0,originalWidth:a.width,originalHeight:a.height});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e){var t=new FileReader,n=new Image;return new Promise((function(r,a){e.type.match(/image.*/)?(t.onload=function(e){n.onload=function(){return r(n)},n.src=e.target.result},t.readAsDataURL(e)):a(new Error("Not an image"))}))}var oe="https://us-central1-cleanup-pictures.cloudfunctions.net/cleanup_proxy/results";function le(e){return ue.apply(this,arguments)}function ue(){return ue=Object(d.a)(u.a.mark((function e(t){var n,r,a,c=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:2e3,e.next=3,ce(t,n);case 3:return r=e.sent,a=r.file,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)}))),ue.apply(this,arguments)}function de(e,t,n,r){return be.apply(this,arguments)}function be(){return(be=Object(d.a)(u.a.mark((function e(t,n,r,a){var c,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new FormData,e.t0=c,e.next=4,le(t.inputImage);case 4:return e.t1=e.sent,e.t0.append.call(e.t0,"input_image",e.t1),e.t2=c,e.next=9,le(t.inputMask);case 9:return e.t3=e.sent,e.t2.append.call(e.t2,"input_mask",e.t3),e.t4=c,e.next=14,le(t.resultImage);case 14:return e.t5=e.sent,e.t4.append.call(e.t4,"result_image",e.t5),i=Object($.a)({Authorization:"Bearer ".concat(r),"x-clipdrop-pro-client":n?"true":"false"},a?{"X-Firebase-AppCheck":a}:{}),e.next=19,fetch(oe,{method:"POST",body:c,headers:i,priority:"low"});case 19:if(!(s=e.sent).ok){e.next=22;break}return e.abrupt("return",s.blob());case 22:throw new Error("[CLEANUP_RESULTS_API] Failed to upload results");case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pe,je=n(4),he=n(11),fe=n(12),me=function(e){Object(he.a)(n,e);var t=Object(fe.a)(n);function n(e,r){var a;return Object(je.a)(this,n),(a=t.call(this,e)).status=r,a}return n}(n(95).a);function xe(e,t,n,r,a,c,i){return ve.apply(this,arguments)}function ve(){return(ve=Object(d.a)(u.a.mark((function e(t,n,r,a,c,i,s){var o,l,d,b,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(o=new FormData).append("image_file",t),l=q(n),o.append("mask_file",l),o.append("refiner",a),o.append("hd",r?"true":"false"),e.next=8;break;case 8:return d={},c&&(d["X-Firebase-AppCheck"]=c),i&&(d.Authorization="Bearer ".concat(i)),void 0!==s&&(d["x-clipdrop-pro-client"]=s?"true":"false"),d["X-HD"]=r?"true":"false",d["X-REFINER"]=a,e.next=16,fetch("https://us-central1-cleanup-pictures.cloudfunctions.net/cleanup_proxy",{method:"POST",headers:d,body:o});case 16:if((b=e.sent).ok){e.next=19;break}throw new me(b.statusText,b.status);case 19:return e.next=21,b.blob();case 21:return p=e.sent,e.abrupt("return",URL.createObjectURL(p));case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e.ERROR="error",e.SUCCESS="success",e.INFO="info"}(pe||(pe={}));var Ce=Object(r.createContext)(void 0);function Oe(e){var t=e.children,n=Object(r.useState)(),a=Object(b.a)(n,2),c=a[0],i=a[1];return Object(v.jsxs)(Ce.Provider,{value:i,children:[c&&Object(v.jsx)("div",{className:"z-50 fixed flex w-full justify-center p-4 animate-slide-in-up",children:Object(v.jsxs)("div",{className:["bg-red-100 rounded-lg py-5 px-6 mb-3 text-base","text-red-700 inline-flex items-center"," fade show"].join(" "),role:"alert",children:[Object(v.jsx)("div",{children:Object(v.jsx)(V.h,{className:"w-6 h-6 mr-4"})}),c,Object(v.jsx)("button",{type:"button",className:["btn-close box-content p-1 ml-8 flex items-center","text-red-700 border-none rounded-none opacity-50","focus:shadow-none focus:outline-none focus:opacity-100","hover:text-yellow-900 hover:opacity-75 hover:no-underline"].join(" "),"data-bs-dismiss":"alert","aria-label":"Close",onClick:function(){return i(void 0)},children:Object(v.jsx)(V.m,{className:"w-6 h-6"})})]})}),t]})}var ge="rgba(189, 255, 1, 0.75)";function we(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ge;e.strokeStyle=n,e.lineCap="round",e.lineJoin="round",t.forEach((function(t){(null===t||void 0===t?void 0:t.pts.length)&&t.size&&(e.lineWidth=t.size,e.beginPath(),e.moveTo(t.pts[0].x,t.pts[0].y),t.pts.forEach((function(t){return e.lineTo(t.x,t.y)})),e.stroke())}))}var ye=Object(r.createContext)(void 0);function ke(e){var t=e.children,n=Object(r.useState)(),a=Object(b.a)(n,2),c=a[0],i=a[1],s=Object(r.useState)([{lines:[{pts:[]}]}]),o=Object(b.a)(s,2),l=o[0],j=o[1],h=Object(r.useState)(),f=Object(b.a)(h,2),x=f[0],C=f[1],O=Object(r.useState)(),g=Object(b.a)(O,2),y=g[0],k=g[1],L=ae(x),E=ae(y),S=N(),H=Object(r.useState)((null===S||void 0===S?void 0:S.isPro())||!1),M=Object(b.a)(H,2),Z=M[0],V=M[1],P=Object(r.useState)("medium"),F=Object(b.a)(P,2),I=F[0],D=F[1],R=Object(r.useState)((function(){return document.createElement("canvas")})),U=Object(b.a)(R,1)[0],_=Object(r.useState)((function(){return document.createElement("canvas")})),A=Object(b.a)(_,1)[0],T=Object(r.useState)((function(){return document.createElement("canvas")})),z=Object(b.a)(T,1)[0],B=function(){var e=Object(r.useContext)(Ce);if(!e)throw new Error("No Alert context (missing AlertProvider?)");return e}(),W=w();Object(r.useEffect)((function(){(null===S||void 0===S?void 0:S.isPro())?(V(!0),document.body.classList.add("pro")):(V(!1),document.body.classList.remove("pro"))}),[S]),Object(r.useEffect)((function(){j([{lines:[{pts:[]}]}])}),[Z]),Object(r.useEffect)((function(){x||(k(void 0),j([{lines:[{pts:[]}]}]),i(void 0))}),[x]);var X=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=l[l.length-1];if(!t)throw new Error("no edit to undo");Z||e?t.lines.length>1||!Z?(t.lines.pop(),t.lines[t.lines.length-1]={pts:[]},j(Object(K.a)(l))):l.length>1?(l.pop(),j(Object(K.a)(l))):console.log("nothing to undo"):(l.pop(),l[l.length-1].lines=[{pts:[]}],j(Object(K.a)(l)))}),[l,Z]),Y=Object(r.useCallback)((function(){var e;if(c&&L){c.clearRect(0,0,c.canvas.width,c.canvas.height);var t=l[l.length-1];(null===(e=t.render)||void 0===e?void 0:e.src)?c.drawImage(t.render,0,0):c.drawImage(L,0,0),we(c,l[l.length-1].lines)}}),[c,L,l]);Object(r.useEffect)((function(){Y()}),[l,Y]);var G=Object(r.useCallback)((function(){for(var e=l.length-1;e>=0;e-=1)if(l[e].render)return l[e].render}),[l]),$=Object(r.useCallback)((function(){if(!(null===c||void 0===c?void 0:c.canvas.width)||!(null===c||void 0===c?void 0:c.canvas.height))throw new Error("canvas has invalid size");z.width=null===c||void 0===c?void 0:c.canvas.width,z.height=null===c||void 0===c?void 0:c.canvas.height;var e=z.getContext("2d");if(!e)throw new Error("could not retrieve mask canvas");we(e,l.reduce((function(e,t){return[].concat(Object(K.a)(e),Object(K.a)(t.lines))}),[]),"white")}),[null===c||void 0===c?void 0:c.canvas.height,null===c||void 0===c?void 0:c.canvas.width,l,z]),q=Object(r.useCallback)((function(){if(x&&E&&(null===c||void 0===c?void 0:c.canvas)){var e=G();if(!e)throw new Error("no last render");c.drawImage(e,0,0),A.width=E.width,A.height=E.height;var t=A.getContext("2d");if(!t)throw new Error("Could not get patch context");t.globalCompositeOperation="source-over",t.clearRect(0,0,A.width,A.height),null===t||void 0===t||t.drawImage(z,0,0,E.width,E.height),t.globalCompositeOperation="source-in",null===t||void 0===t||t.drawImage(null===c||void 0===c?void 0:c.canvas,0,0,E.width,E.height),U.width=E.width,U.height=E.height;var n=U.getContext("2d");if(!t)throw new Error("Could not get output context");if(!n)throw new Error("Could not get output context");return n.drawImage(E,0,0),n.drawImage(A,0,0),te(n.canvas)}console.error(x,E,null===c||void 0===c?void 0:c.canvas)}),[c,x,z,E,U,A,G]),ee=Object(r.useCallback)(Object(d.a)(u.a.mark((function e(){var t,n,r,a,i,s,o,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x&&c){e.next=3;break}return console.error("no file or context"),e.abrupt("return");case 3:if(!Z){e.next=9;break}return e.next=6,q();case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,te(c.canvas);case 11:e.t0=e.sent;case 12:if(n=e.t0){e.next=15;break}throw new Error("could not get canvas data");case 15:return r=x.name.replace(/(\.[\w\d_-]+)$/i,"_cleanup$1"),a=new File([n],r,{type:x.type}),e.next=19,Q(a);case 19:if(!e.sent){e.next=23;break}null===W||void 0===W||W.logEvent("download",{mode:"share"}),e.next=25;break;case 23:J(a),null===W||void 0===W||W.logEvent("download",{mode:"download"});case 25:return e.next=27,te(z);case 27:if(i=e.sent,s=new File([i],"mask.png",{type:"image/png"}),W){e.next=31;break}throw new Error("Firebase is not initialized");case 31:if(o=null===S||void 0===S||null===(t=S.user)||void 0===t?void 0:t.firebaseUser){e.next=34;break}return e.abrupt("return");case 34:return e.next=36,W.getAppCheckToken();case 36:return l=e.sent,e.next=39,Object(m.c)(o,!0);case 39:return d=e.sent,e.next=42,de({inputImage:x,resultImage:a,inputMask:s},S.isPro(),d,l);case 42:case"end":return e.stop()}}),e)}))),[c,x,z,W,q,Z,S]),ne=Object(r.useCallback)(Object(d.a)(u.a.mark((function e(){var t,n,r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($(),e.prev=1,W){e.next=4;break}throw new Error("Firebase is not initialized");case 4:if(x){e.next=6;break}throw new Error("No file");case 6:if(L){e.next=8;break}throw new Error("No image");case 8:return t=Date.now(),null===W||void 0===W||W.logEvent("inpaint_start"),e.next=12,W.getAppCheckToken();case 12:return n=e.sent,e.next=15,W.getAuthToken();case 15:return r=e.sent,e.next=18,xe(x,z.toDataURL(),Z,I,n,r,null===S||void 0===S?void 0:S.isPro());case 18:if(a=e.sent){e.next=21;break}throw new Error("empty response");case 21:return c=new Image,e.next=24,re(c,a);case 24:j([].concat(Object(K.a)(l),[{lines:[{pts:[]}],render:c}])),null===W||void 0===W||W.logEvent("inpaint_processed",{duration:Date.now()-t,width:L.naturalWidth,height:L.naturalHeight}),e.next=36;break;case 28:e.prev=28,e.t0=e.catch(1),null===W||void 0===W||W.logEvent("inpaint_failed",{error:e.t0}),p.a(e.t0),l[l.length-1].lines.push({pts:[]}),j(Object(K.a)(l)),429===e.t0.status?B(Object(v.jsx)("p",{children:"Too many requests. Please upgrade to Pro or try again later."}),pe.ERROR):B(Object(v.jsx)("p",{children:"Something went wrong. Please try again later or contact support."}),pe.ERROR);case 36:case"end":return e.stop()}}),e,null,[[1,28]])}))),[x,W,L,z,l,$,B,Z,I,S]),ce=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Z||e){var t=l[l.length-1];t.lines.push({pts:[]}),j(Object(K.a)(l))}else{var n={lines:[{pts:[]}]};j([].concat(Object(K.a)(l),[n]))}}),[l,Z]),ie={useHD:Z,setUseHD:V,refiner:I,setRefiner:D,file:x,setFile:C,originalFile:y,setOriginalFile:k,image:L,edits:l,addLine:ce,maskCanvas:z,context:c,setContext:i,render:ne,draw:Y,undo:X,download:ee};return Object(v.jsx)(ye.Provider,{value:ie,children:t})}function Le(){var e=Object(r.useContext)(ye);if(!e)throw new Error("No EditorUI context (missing EditorUIProvider?)");return e}n(130);var Ne=n(127),Ee=n(121);function Se(e){var t=e.label,n=e.onClick,r=e.icon,a=e.primary;return Object(v.jsx)(Ee.a.Item,{children:function(e){var c=e.active;return Object(v.jsxs)("button",{type:"button",className:[c?"bg-gray-100":"",a?"bg-primary":"","flex w-full px-5 py-3 text-sm text-gray-700 space-x-3 whitespace-nowrap flex-nowrap"].join(" "),onClick:n,children:[r,Object(v.jsx)("span",{className:"font-medium",children:t})]})}})}function He(e){var t=e.onUpgrade,n=e.onSignin,a=N(),c=Object(r.useState)(!1),i=Object(b.a)(c,2),s=i[0],o=i[1];return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(Ee.a,{as:"div",className:"ml-3 relative",children:function(e){var c,i,l,b=e.open;return Object(v.jsxs)(v.Fragment,{children:[s?Object(v.jsx)("div",{className:"p-3",children:Object(v.jsx)(D,{})}):Object(v.jsx)("div",{children:Object(v.jsx)(Ee.a.Button,{"aria-label":"Menu",className:"flex items-center justify-center p-3 px-5 rounded-md hover:bg-primary",children:Object(v.jsx)(V.f,{className:"w-6 h-6"})})}),Object(v.jsx)(Ne.a,{show:b,as:r.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:Object(v.jsxs)(Ee.a.Items,{static:!0,className:"origin-top-right absolute right-0 mt-2 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:[Object(v.jsxs)("div",{className:"p-4 ",children:[(null===a||void 0===a?void 0:a.isPro())?Object(v.jsx)("p",{children:"Cleanup Pro"}):Object(v.jsx)("p",{children:"Cleanup Free"}),(null===a||void 0===a?void 0:a.user)&&!a.user.anonymous&&Object(v.jsxs)("p",{className:"text-xs font-thin font-mono opacity-70 selection-text mt-3",style:{userSelect:"text"},children:[null===(c=a.user)||void 0===c?void 0:c.firebaseUser.email,Object(v.jsx)("br",{}),null===(i=a.user)||void 0===i?void 0:i.firebaseUser.uid]})]}),!(null===a||void 0===a?void 0:a.isPro())&&Object(v.jsx)(Se,{primary:!0,label:"Upgrade to Cleanup Pro",icon:Object(v.jsx)(V.b,{className:"w-6 h-6"}),onClick:t}),(null===a||void 0===a||null===(l=a.user)||void 0===l?void 0:l.anonymous)&&Object(v.jsx)(Se,{label:"Sign in",icon:Object(v.jsx)(V.l,{className:"w-6 h-6"}),onClick:n}),Object(v.jsx)(Se,{label:"Contact Support",icon:Object(v.jsx)(V.d,{className:"w-6 h-6"}),onClick:function(){window.open("mailto:contact@cleanup.pictures","_blank")}}),(null===a||void 0===a?void 0:a.user)&&!a.user.anonymous&&Object(v.jsxs)(v.Fragment,{children:[a.hasPortal()&&Object(v.jsx)(Se,{label:"Manage subscription",icon:Object(v.jsx)(V.i,{className:"w-6 h-6"}),onClick:Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,null===a||void 0===a?void 0:a.openPortal();case 3:case"end":return e.stop()}}),e)})))}),Object(v.jsx)(Se,{label:"Sign out",icon:Object(v.jsx)(V.k,{className:"w-6 h-6"}),onClick:function(){return null===a||void 0===a?void 0:a.signOut()}})]})]})})]})}})})}var Me=n(122);function Ze(e){var t=e.enabled,n=e.label,r=e.setEnabled;return Object(v.jsx)(Me.a.Group,{children:Object(v.jsxs)("div",{className:"inline-flex items-center",children:[Object(v.jsx)(Me.a.Label,{className:"mr-4",children:n}),Object(v.jsx)(Me.a,{checked:t,onChange:r,className:"".concat(t?"bg-primary":"bg-gray-200"," relative inline-flex items-center h-6 rounded-full w-11"),children:Object(v.jsx)("span",{className:"\n            transform transition ease-in-out duration-200 \n            ".concat(t?"bg-black translate-x-6":"bg-gray-600 translate-x-1"," inline-block w-4 h-4 transform  rounded-full")})})]})})}function Ve(e){var t=e.onBack,n=e.useHD,r=(e.refiner,e.setRefiner,e.showOriginal),a=e.setShowOriginal,c=e.setShowUpgrade,i=e.setShowSignin,s=Object(A.a)(),o=Le();return Object(v.jsxs)("header",{className:["absolute z-10 flex p-2 w-full","bg-white bg-opacity-50 backdrop-blur-xl","justify-between items-center sm:items-start"].join(" "),children:[Object(v.jsx)(Z,{icon:Object(v.jsx)(V.a,{className:"w-6 h-6"}),onClick:t,children:s.width>640?"Start new":void 0}),Object(v.jsxs)("div",{className:"flex space-x-4",children:[Object(v.jsx)("div",{className:"mr-4 flex items-center",children:Object(v.jsx)(Ze,{label:Object(v.jsx)(V.j,{className:"w-6 h-6"}),enabled:r,setEnabled:a})}),n&&!1,o.edits[o.edits.length-1].render?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(Z,{primary:!0,icon:Object(v.jsx)(V.g,{className:"w-6 h-6"}),onClick:o.download,className:"-mr-4",children:s.width>640?"Download":void 0})}):Object(v.jsx)(v.Fragment,{}),Object(v.jsx)(He,{onUpgrade:function(){return c(!0)},onSignin:function(){return i(!0)}})]})]})}var Pe=n(126),Fe=n(131),Ie=n(83);function De(e){var t=e.value,n=e.onChange,r=e.label,a=e.min,c=e.max,i=((c||100)-(a||0))/100;return Object(v.jsxs)("div",{className:"inline-flex items-center py-1 space-x-4 text-black",children:[Object(v.jsx)("span",{children:r}),Object(v.jsx)("input",{className:["appearance-none rounded-lg h-4","bg-primary","w-24 md:w-auto"].join(" "),type:"range",step:i,min:a,max:c,value:t,onChange:function(e){e.preventDefault(),e.stopPropagation(),n(parseInt(e.currentTarget.value,10))}})]})}function Re(e){var t=e.editor,n=e.brushSize,r=e.setBrushSize,a=e.isLoading,c=e.onCleanupClick,i=t.undo,s=t.edits,o=s[s.length-1],l=s.length>1||o.lines.length>1,u=Object(A.a)().width<640;return Object(v.jsxs)("div",{className:["flex sm:items-center space-x-4 max-w-3xl","bg-gray-200 bg-opacity-50 backdrop-blur-xl rounded-2xl","p-2","justify-evenly"].join(" "),children:[l?Object(v.jsx)(Z,{icon:Object(v.jsx)("svg",{width:"19",height:"9",viewBox:"0 0 19 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",children:Object(v.jsx)("path",{d:"M2 1C2 0.447715 1.55228 0 1 0C0.447715 0 0 0.447715 0 1H2ZM1 8H0V9H1V8ZM8 9C8.55228 9 9 8.55229 9 8C9 7.44771 8.55228 7 8 7V9ZM16.5963 7.42809C16.8327 7.92721 17.429 8.14016 17.9281 7.90374C18.4272 7.66731 18.6402 7.07103 18.4037 6.57191L16.5963 7.42809ZM16.9468 5.83205L17.8505 5.40396L16.9468 5.83205ZM0 1V8H2V1H0ZM1 9H8V7H1V9ZM1.66896 8.74329L6.66896 4.24329L5.33104 2.75671L0.331035 7.25671L1.66896 8.74329ZM16.043 6.26014L16.5963 7.42809L18.4037 6.57191L17.8505 5.40396L16.043 6.26014ZM6.65079 4.25926C9.67554 1.66661 14.3376 2.65979 16.043 6.26014L17.8505 5.40396C15.5805 0.61182 9.37523 -0.710131 5.34921 2.74074L6.65079 4.25926Z",fill:"currentColor"})}),onClick:function(){i(u)}}):Object(v.jsx)(v.Fragment,{}),Object(v.jsx)("div",{className:["py-2",l?"ml-0":"pl-4",t.useHD?"":"pr-4"].join(" "),children:Object(v.jsx)(De,{label:Object(v.jsx)("span",{children:"Brush"}),min:10,max:200,value:n,onChange:r})}),t.useHD||u?Object(v.jsxs)(Z,{primary:!0,disabled:a||o.lines.length<=1,onClick:c,children:["Clean",t.useHD?" HD":""]}):Object(v.jsx)(v.Fragment,{})]})}function Ue(e){var t=e.zoom,n=e.minZoom,r=e.setZoom,a=e.onResetClick;return Object(v.jsxs)("div",{className:["flex items-center space-x-4 max-w-3xl","bg-gray-200 bg-opacity-50 backdrop-blur-xl rounded-2xl","p-2","justify-evenly"].join(" "),children:[Object(v.jsx)("div",{className:"py-2 pl-4",children:Object(v.jsx)(De,{label:Object(v.jsx)("span",{children:"Zoom"}),min:100*n,max:500,value:100*t,onChange:function(e){return r(e/100)}})}),Object(v.jsx)(Z,{primary:!0,icon:Object(v.jsx)(V.c,{className:"w-6 h-6"}),disabled:1===t,onClick:a,children:"Reset"})]})}function _e(){return Object(v.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(v.jsx)("path",{d:"M2 13L1.34921 12.2407C1.16773 12.3963 1.04797 12.6117 1.01163 12.8479L2 13ZM22.5 4L23.49 4.14142C23.5309 3.85444 23.4454 3.5638 23.2555 3.3448C23.0655 3.1258 22.7899 3 22.5 3V4ZM12.5 4V3C12.2613 3 12.0305 3.08539 11.8492 3.24074L12.5 4ZM1 19.5L0.0116283 19.3479C-0.0327373 19.6363 0.051055 19.9297 0.241035 20.1511C0.431014 20.3726 0.708231 20.5 1 20.5V19.5ZM11.5 19.5V20.5C11.7373 20.5 11.9668 20.4156 12.1476 20.2619L11.5 19.5ZM21.5 11L22.1476 11.7619C22.3337 11.6038 22.4554 11.3831 22.49 11.1414L21.5 11ZM2 14H12.5V12H2V14ZM13.169 13.7433L23.169 4.74329L21.831 3.25671L11.831 12.2567L13.169 13.7433ZM22.5 3H12.5V5H22.5V3ZM11.8492 3.24074L1.34921 12.2407L2.65079 13.7593L13.1508 4.75926L11.8492 3.24074ZM1.01163 12.8479L0.0116283 19.3479L1.98837 19.6521L2.98837 13.1521L1.01163 12.8479ZM1 20.5H11.5V18.5H1V20.5ZM12.4884 19.6521L13.4884 13.1521L11.5116 12.8479L10.5116 19.3479L12.4884 19.6521ZM21.51 3.85858L20.51 10.8586L22.49 11.1414L23.49 4.14142L21.51 3.85858ZM20.8524 10.2381L10.8524 18.7381L12.1476 20.2619L22.1476 11.7619L20.8524 10.2381Z",fill:"currentColor"})})}function Ae(){return Object(v.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(v.jsx)("path",{d:"M9.77781 15.5556C12.9688 15.5556 15.5556 12.9688 15.5556 9.77781C15.5556 6.58681 12.9688 4 9.77781 4C6.58681 4 4 6.58681 4 9.77781C4 12.9688 6.58681 15.5556 9.77781 15.5556Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(v.jsx)("path",{d:"M19 19L14 14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}function Te(e){var t=e.children;return Object(v.jsx)("div",{className:"tooltip pointer-events-none relative mx-2 hidden sm:block",children:Object(v.jsxs)("div",{className:["text-black bg-gray-100 dark:bg-gray-800 dark:text-gray-300","text-xs font-medium rounded-xl py-3 px-5 right-0 top-full whitespace-nowrap"].join(" "),children:[t,Object(v.jsx)("svg",{className:["absolute text-gray-100 dark:text-gray-800 h-2 w-full left-0 bottom-0"].join(" "),style:{transform:"translateY(8px)"},x:"0px",y:"0px",viewBox:"0 0 255 255",xmlSpace:"preserve",children:Object(v.jsx)("polygon",{className:"fill-current",points:"0,0 127.5,127.5 255,0"})})]})})}function ze(e){var t=e.active,n=e.icon,r=e.onClick,a=e.tip;return Object(v.jsxs)("div",{className:[t?"pointer-events-none":"","has-tooltip"].join(" "),children:[Object(v.jsx)(Z,{primary:t,icon:n,onClick:r}),a&&Object(v.jsx)(Te,{children:a})]})}function Be(e){var t=e.tool,n=e.onChange;return Object(v.jsxs)("div",{className:["flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:mx-4 sm:space-x-2","bg-white bg-opacity-50 backdrop-blur-xl rounded-2xl","p-2 sm:py-2 pointer-events-auto"].join(" "),children:[Object(v.jsx)(ze,{icon:Object(v.jsx)(_e,{}),active:"clean"===t,onClick:function(){return n("clean")}}),Object(v.jsx)(ze,{icon:Object(v.jsx)(Ae,{}),active:"zoom"===t,onClick:function(){return n("zoom")},tip:"Hold Spacebar"})]})}function We(e){var t=e.showOriginal,n=e.showSeparator,a=e.setShowOriginal,c=e.setShowSeparator,i=Object(r.useState)({x:-1,y:-1}),s=Object(b.a)(i,2),o=s[0],l=o.x,p=o.y,j=s[1],h=Object(r.useState)(!1),f=Object(b.a)(h,2),m=f[0],x=f[1],C=Object(r.useState)(!1),O=Object(b.a)(C,2),g=O[0],y=O[1],k=Object(r.useState)("clean"),L=Object(b.a)(k,2),N=L[0],E=L[1],S=w(),H=Object(r.useState)(),M=Object(b.a)(H,2),Z=M[0],V=M[1],P=Object(A.a)(),F=P.width<640,I=Object(r.useRef)(),D=Object(r.useState)(F?90:50),R=Object(b.a)(D,2),U=R[0],_=R[1],T=Object(r.useState)(1),z=Object(b.a)(T,2),B=z[0],W=z[1],X=Le(),Y=X.image,G=X.undo,K=X.file,$=X.edits,q=X.addLine,J=X.context,Q=X.render,ee=X.draw,te=X.setContext,ne=X.maskCanvas,re=X.useHD,ae=X.refiner,ce=$[$.length-1],ie=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;if(Z&&Y&&P&&I.current){var t=I.current,n=(P.width-Y.width*Z)/2,r=(P.height-Y.height*Z)/2;t.setTransform(n,r,Z,e,"easeOutQuad"),W(Z)}}),[Z,Y,P]),se=Object(r.useCallback)((function(e){var t,n=I.current;if(n&&Y){var r=(.5*P.width-n.state.positionX)/(Y.width*n.state.scale),a=(.5*P.height-n.state.positionY)/(Y.height*n.state.scale);null===(t=I.current)||void 0===t||t.setTransform(.5*P.width-Y.width*e*r,.5*P.height-Y.height*e*a,e,200,"easeOutQuad"),W(e)}}),[P.width,P.height,Y]);Object(r.useEffect)((function(){t?c(!0):setTimeout((function(){return c(!1)}),300)}),[t,c]),Object(Pe.a)(" ",(function(e){null===e||void 0===e||e.preventDefault(),x(!1),E("zoom")}),(function(e){null===e||void 0===e||e.preventDefault(),x(!0),E("clean")})),Object(Pe.a)("Escape",ie),Object(r.useEffect)((function(){return ie(0)}),[re,ie]),Object(Fe.a)(ie,75,[P]),Object(Pe.a)("Tab",void 0,(function(e){null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation(),a(!1)})),Object(r.useEffect)((function(){var e=function(e){("Tab"===e.key&&(e.preventDefault(),a(!0)),$.length<2&&!ce.lines.length)||(e.metaKey||e.ctrlKey)&&"z"===e.key&&(e.preventDefault(),G())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[$,ce,G,a]),Object(r.useEffect)((function(){if(Y){var e=P.width/Y.naturalWidth,t=(P.height-180)/Y.naturalHeight;if(e<1||t<1){var n=Math.min(e,t);V(n)}else V(1);(null===J||void 0===J?void 0:J.canvas)&&(J.canvas.width=Y.naturalWidth,J.canvas.height=Y.naturalHeight),ee()}}),[null===J||void 0===J?void 0:J.canvas,ee,Y,P]),Object(r.useEffect)((function(){J&&(y(!0),Q().finally((function(){y(!1)})))}),[ae]),Object(r.useEffect)((function(){if(S&&Y&&J&&"clean"===N){var e=null===J||void 0===J?void 0:J.canvas;if(e){var n=function(e){j({x:e.pageX,y:e.pageY})},r=function(e,t){ce.lines[ce.lines.length-1].pts.push({x:e,y:t}),ee()},a=function(e){var t=e.offsetX,n=e.offsetY;r(t,n)},c=function(){var t=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((null===Y||void 0===Y?void 0:Y.src)&&K){t.next=2;break}return t.abrupt("return");case 2:if(e.removeEventListener("mousemove",a),e.removeEventListener("mouseleave",c),window.removeEventListener("mouseup",c),re||F){t.next=12;break}return y(!0),t.next=9,Q();case 9:y(!1),t.next=13;break;case 12:q(!0);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();window.addEventListener("mousemove",n);var i=function(t){var n;t.preventDefault(),t.stopPropagation();var r=ce.lines[ce.lines.length-1],a=e.getBoundingClientRect(),c=(null===(n=I.current)||void 0===n?void 0:n.state.scale)||1;r.pts.push({x:(t.touches[0].clientX-a.x)/c,y:(t.touches[0].clientY-a.y)/c}),ee()},s=function(n){var a;if(n.preventDefault(),n.stopPropagation(),Y.src&&!t){var c=(null===(a=I.current)||void 0===a?void 0:a.state.scale)||1;ce.lines[ce.lines.length-1].size=U/c;var i=e.getBoundingClientRect(),s=(n.touches[0].clientX-i.x)/c,o=(n.touches[0].clientY-i.y)/c;r(s,o)}};return e.addEventListener("touchstart",s),e.addEventListener("touchmove",i),e.addEventListener("touchend",c),e.onmouseenter=function(){return x(!0)},e.onmouseleave=function(){return x(!1)},e.onmousedown=function(n){var i;if(Y.src&&!t){var s=ce.lines[ce.lines.length-1],o=(null===(i=I.current)||void 0===i?void 0:i.state.scale)||1;s.size=U/o,e.addEventListener("mousemove",a),e.addEventListener("mouseleave",c),window.addEventListener("mouseup",c),r(n.offsetX,n.offsetY)}},e.focus(),function(){e.removeEventListener("mousemove",a),e.removeEventListener("mouseleave",c),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",c),e.removeEventListener("touchstart",s),e.removeEventListener("touchmove",i),e.removeEventListener("touchend",c),e.onmouseenter=null,e.onmouseleave=null,e.onmousedown=null}}}}),[U,J,K,ee,q,ne,Y,ce,S,Q,re,N,I,m,F,t]);var oe=Object(r.useCallback)((function(){return t?"default":m?"none":"zoom"===N?"grab":void 0}),[m,N,t]);return Y&&Z?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Ie.b,{ref:function(e){e&&(I.current=e)},panning:{disabled:"zoom"!==N,velocityDisabled:!0},wheel:{step:.05},centerZoomedOut:!0,alignmentAnimation:{disabled:!0},centerOnInit:!0,limitToBounds:!1,initialScale:Z,minScale:Z,onZoom:function(e){W(e.state.scale)},children:Object(v.jsx)(Ie.a,{wrapperStyle:{width:"100%",height:"100%"},contentClass:g?"animate-pulse-fast pointer-events-none transition-opacity":"",children:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("canvas",{className:"rounded-sm",style:{cursor:oe()},ref:function(e){if(e&&!J){var t=e.getContext("2d");t&&te(t)}}}),Object(v.jsx)("div",{className:["absolute top-0 right-0 pointer-events-none","overflow-hidden","border-primary",n?"border-l-4":""].join(" "),style:{width:t?"".concat(Math.round(Y.naturalWidth),"px"):"0px",height:Y.naturalHeight,transitionProperty:"width, height",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"300ms"},children:Object(v.jsx)("img",{className:"absolute right-0",src:Y.src,alt:"original",width:"".concat(Y.naturalWidth,"px"),height:"".concat(Y.naturalHeight,"px"),style:{width:"".concat(Y.naturalWidth,"px"),height:"".concat(Y.naturalHeight,"px"),maxWidth:"none"}})})]})})}),m&&"clean"===N&&!t&&Object(v.jsx)("div",{className:["hidden sm:block fixed z-50 rounded-full pointer-events-none","border border-primary bg-primary bg-opacity-80"].join(" "),style:{width:"".concat(U,"px"),height:"".concat(U,"px"),left:"".concat(l,"px"),top:"".concat(p,"px"),transform:"translate(-50%, -50%)"}}),Object(v.jsxs)("div",{className:["absolute w-full px-2 pb-2 sm:pb-0 flex","justify-center flex-col sm:flex-row space-y-2 sm:space-y-0","items-end sm:items-center bottom-0 pointer-events-none"].join(" "),style:{height:P.width>640?"".concat(Math.max(90,(window.innerHeight-Y.naturalHeight*B)/2),"px"):void 0},children:[Object(v.jsx)(Be,{tool:N,onChange:E}),Object(v.jsxs)("div",{className:"flex w-full justify-center sm:justify-start sm:w-90 pointer-events-auto",children:["clean"===N&&Object(v.jsx)(Re,{editor:X,brushSize:U,setBrushSize:_,isLoading:g,onCleanupClick:Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,Q();case 3:y(!1);case 4:case"end":return e.stop()}}),e)})))}),"zoom"===N&&Object(v.jsx)(Ue,{zoom:B||Z,minZoom:Z,setZoom:se,onResetClick:ie})]})]})]}):Object(v.jsx)(v.Fragment,{})}function Xe(){var e=w(),t=Object(r.useState)(),n=Object(b.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){if(null===e||void 0===e?void 0:e.firestore){var t=Object(x.b)(e.firestore,"banners"),n=Object(x.i)(t,Object(x.j)("env","==","prod"),Object(x.j)("active","==",!0),Object(x.g)(1));Object(x.h)(n,(function(e){var t=e.docs[0];if(t&&t.id&&sessionStorage.getItem("closedBanner")!==t.id){var n=null===t||void 0===t?void 0:t.data();c(Object($.a)(Object($.a)({},n),{},{id:t.id}))}}))}}),[e]),a?Object(v.jsxs)("div",{className:"bg-primary text-black p-3 sm:p-7 text-center font-semibold text-lg relative",children:[a.text,Object(v.jsx)("a",{className:"underline pl-2",href:a.url,target:"_blank",rel:"noreferrer dofollow",children:a.cta}),Object(v.jsx)("div",{className:"absolute right-1 top-0 h-full flex items-center",children:Object(v.jsx)(Z,{icon:Object(v.jsx)(V.m,{className:"w-6 h-6"}),onClick:function(){sessionStorage.setItem("closedBanner",null===a||void 0===a?void 0:a.id),c(void 0)}})})]}):Object(v.jsx)(v.Fragment,{})}function Ye(e){var t=e.onSelection,n=Object(r.useState)(!1),a=Object(b.a)(n,2),c=a[0],i=a[1],s=Object(r.useState)("file-upload-".concat(Math.random().toString())),o=Object(b.a)(s,1)[0];function l(e){if(e&&e.type.match("image.*"))try{if(e.size>52428800)throw new Error("file too large");t(e)}catch(n){alert("error: ".concat(n.message)),p.a(n)}}function j(e){return h.apply(this,arguments)}function h(){return(h=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.file((function(t){return e(t)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return m.apply(this,arguments)}function m(){return(m=Object(d.a)(u.a.mark((function e(t){var n,r,a,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r=[],a=0;a<t.length;a+=1)r.push(t[a].webkitGetAsEntry());case 3:if(!(r.length>0)){e.next=23;break}if(!(null===(c=r.shift())||void 0===c?void 0:c.isFile)){e.next=12;break}return e.next=8,j(c);case 8:i=e.sent,n.push(i),e.next=21;break;case 12:if(!(null===c||void 0===c?void 0:c.isDirectory)){e.next=21;break}return e.t0=r.push,e.t1=r,e.t2=K.a,e.next=18,x(c.createReader());case 18:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 21:e.next=3;break;case 23:return e.abrupt("return",n);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return C.apply(this,arguments)}function C(){return(C=Object(d.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,O(t);case 3:r=e.sent;case 4:if(!(r.length>0)){e.next=11;break}return n.push.apply(n,Object(K.a)(r)),e.next=8,O(t);case 8:r=e.sent,e.next=4;break;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return g.apply(this,arguments)}function g(){return(g=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){t.readEntries(e,n)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,f(t.dataTransfer.items);case 3:n=e.sent,i(!1),l(n[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(v.jsx)("label",{htmlFor:o,className:"flex items-center w-full h-full group relative cursor-pointer rounded-md font-medium focus-within:outline-none",children:Object(v.jsxs)("div",{className:["w-full flex items-center justify-center px-6 py-8 sm:py-16 text- font-semibold","border-4 border-dashed rounded-3xl","border-black hover:bg-primary","text-center",c?"bg-primary":"bg-gray-100"].join(" "),onDrop:function(e){return w.apply(this,arguments)},onDragOver:function(e){e.stopPropagation(),e.preventDefault(),i(!0)},onDragLeave:function(){return i(!1)},children:[Object(v.jsx)("input",{id:o,name:o,type:"file",className:"sr-only",onChange:function(e){var t,n=null===(t=e.currentTarget.files)||void 0===t?void 0:t[0];n&&l(n),e.currentTarget.value=""},accept:"image/png, image/jpeg"}),Object(v.jsx)("p",{className:"hidden sm:block",children:"Click here or drag an image file"}),Object(v.jsx)("p",{className:"sm:hidden",children:"Tap here to load your picture"})]})})}function Ge(e){var t=e.className,n=e.hideText;return Object(v.jsxs)("svg",{width:"399",height:"90",viewBox:"0 0 399 90",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[Object(v.jsx)("path",{d:"M33.5609 52.925L57.124 27.2437H88.5414L58.552 70.7592H27.8486L33.5609 52.925Z",fill:"#BDFF01"}),Object(v.jsx)("path",{d:"M33.5609 52.925L57.124 27.2437H88.5414L58.552 70.7592H27.8486L33.5609 52.925Z",fill:"white"}),Object(v.jsx)("path",{d:"M33.5609 52.925L57.124 27.2437H88.5414L58.552 70.7592H27.8486L33.5609 52.925Z",stroke:"black"}),Object(v.jsx)("path",{d:"M11.3688 57.243L2.34218 58.7824C1.30326 58.9604 0.602766 59.9473 0.781397 60.9905C0.86491 61.5098 1.15697 61.9456 1.55368 62.2268C1.95232 62.5132 2.46107 62.6452 2.98168 62.5598L12.0091 61.0192C13.0472 60.8424 13.7494 59.8531 13.5733 58.8116C13.3976 57.7668 12.4105 57.0689 11.3688 57.243Z",fill:"black"}),Object(v.jsx)("path",{d:"M67.5979 13.1728C68.0204 12.9232 68.3476 12.5114 68.4792 11.9966L70.7546 3.0952C71.0149 2.07274 70.398 1.02772 69.3802 0.76576C68.359 0.504033 67.318 1.12093 67.0584 2.14469L64.7831 11.0461C64.5202 12.0701 65.1382 13.111 66.1575 13.3756C66.6656 13.5052 67.1807 13.4194 67.5979 13.1728Z",fill:"black"}),Object(v.jsx)("path",{d:"M36.0157 16.7592C36.5041 17.6943 37.6573 18.0557 38.589 17.5642C39.5239 17.0735 39.8826 15.9168 39.3954 14.9799L35.1416 6.84287C34.6499 5.90697 33.4997 5.54494 32.5621 6.03772C31.6278 6.53134 31.2717 7.68594 31.7619 8.62216L36.0157 16.7592Z",fill:"black"}),Object(v.jsx)("path",{d:"M10.2051 32.9383L18.8216 36.0512C19.8109 36.4098 20.9022 35.8953 21.2646 34.8987C21.6224 33.9031 21.1081 32.808 20.1128 32.4488L11.4996 29.3333C10.5075 28.9728 9.41587 29.4903 9.05225 30.4837C8.69598 31.4794 9.21275 32.5794 10.2051 32.9383Z",fill:"black"}),Object(v.jsx)("path",{d:"M89.9394 24.9907C89.6455 24.609 89.1871 24.3809 88.7064 24.3809H57.7489C57.4688 24.3809 57.2014 24.4587 56.9637 24.6058L56.9096 24.56L30.8224 52.2712L30.5444 52.5857L30.5794 52.622C30.521 52.7243 30.4775 52.8298 30.4489 52.9396L25.6094 71.0858C25.4874 71.5517 25.5871 72.057 25.8768 72.4398C26.1707 72.8214 26.6312 73.0496 27.1097 73.0496H58.0694C58.5649 73.0496 59.0041 72.8395 59.4604 72.3811L84.9216 45.2808C85.0044 45.1923 85.2887 44.784 85.3673 44.4908L90.2068 26.3436C90.3309 25.8787 90.2312 25.3755 89.9394 24.9907ZM56.8757 69.928H29.1332L33.1408 54.9055H60.8833L56.8757 69.928ZM62.4855 51.784H35.5558L58.4184 27.5024H85.345L62.4855 51.784Z",fill:"black"}),!n&&Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("path",{d:"M143.171 44.6229H137.667C137.594 44.0578 137.443 43.5477 137.216 43.0927C136.988 42.6377 136.687 42.2487 136.313 41.9258C135.939 41.6029 135.495 41.357 134.981 41.1882C134.474 41.0121 133.913 40.924 133.297 40.924C132.203 40.924 131.26 41.1919 130.467 41.7276C129.682 42.2634 129.077 43.0376 128.651 44.0504C128.233 45.0632 128.023 46.2888 128.023 47.7273C128.023 49.2244 128.236 50.4794 128.662 51.4922C129.095 52.4976 129.7 53.2572 130.478 53.771C131.264 54.2773 132.192 54.5305 133.263 54.5305C133.865 54.5305 134.412 54.4535 134.904 54.2994C135.403 54.1452 135.839 53.9214 136.214 53.6278C136.595 53.3269 136.907 52.9637 137.15 52.538C137.399 52.105 137.571 51.617 137.667 51.0739L143.171 51.1069C143.076 52.105 142.786 53.0884 142.301 54.0572C141.824 55.0259 141.168 55.9103 140.331 56.7102C139.494 57.5028 138.474 58.134 137.271 58.6037C136.074 59.0734 134.702 59.3082 133.153 59.3082C131.113 59.3082 129.286 58.8606 127.671 57.9652C126.064 57.0625 124.794 55.7488 123.862 54.0241C122.93 52.2995 122.464 50.2005 122.464 47.7273C122.464 45.2467 122.938 43.1441 123.884 41.4194C124.831 39.6947 126.112 38.3847 127.726 37.4893C129.341 36.594 131.15 36.1463 133.153 36.1463C134.518 36.1463 135.781 36.3371 136.94 36.7188C138.1 37.093 139.12 37.6435 140.001 38.37C140.881 39.0893 141.597 39.9736 142.147 41.0231C142.698 42.0726 143.039 43.2725 143.171 44.6229ZM151.672 36.4545V59H146.289V36.4545H151.672ZM163.003 59.3192C161.234 59.3192 159.708 58.9706 158.423 58.2734C157.146 57.5689 156.163 56.5671 155.473 55.2681C154.791 53.9618 154.449 52.4096 154.449 50.6115C154.449 48.8648 154.794 47.3383 155.484 46.032C156.174 44.7183 157.146 43.6982 158.401 42.9716C159.656 42.2377 161.135 41.8707 162.838 41.8707C164.041 41.8707 165.142 42.0579 166.14 42.4322C167.139 42.8065 168.001 43.3606 168.727 44.0945C169.454 44.8284 170.019 45.7347 170.423 46.8136C170.826 47.8851 171.028 49.1143 171.028 50.5014V51.8445H156.332V48.718H166.019C166.012 48.1456 165.876 47.6355 165.612 47.1879C165.348 46.7402 164.985 46.3916 164.522 46.142C164.067 45.8852 163.542 45.7567 162.948 45.7567C162.346 45.7567 161.807 45.8925 161.33 46.1641C160.853 46.4283 160.475 46.7915 160.196 47.2539C159.917 47.7089 159.77 48.2263 159.756 48.8061V51.9876C159.756 52.6774 159.891 53.2829 160.163 53.804C160.434 54.3177 160.82 54.7177 161.319 55.0039C161.818 55.2901 162.412 55.4332 163.102 55.4332C163.579 55.4332 164.012 55.3672 164.401 55.2351C164.79 55.103 165.124 54.9085 165.403 54.6516C165.682 54.3948 165.891 54.0792 166.03 53.7049L170.973 53.848C170.768 54.9562 170.316 55.9213 169.619 56.7433C168.929 57.5579 168.023 58.1927 166.9 58.6477C165.777 59.0954 164.478 59.3192 163.003 59.3192ZM178.544 59.2862C177.465 59.2862 176.508 59.1064 175.671 58.7468C174.842 58.3799 174.185 57.8294 173.701 57.0955C173.224 56.3543 172.985 55.4259 172.985 54.3104C172.985 53.371 173.15 52.5784 173.48 51.9325C173.811 51.2867 174.266 50.762 174.845 50.3583C175.425 49.9547 176.093 49.6501 176.849 49.4446C177.605 49.2318 178.412 49.0887 179.271 49.0153C180.232 48.9272 181.007 48.8355 181.594 48.7401C182.181 48.6373 182.606 48.4942 182.871 48.3107C183.142 48.1199 183.278 47.852 183.278 47.5071V47.4521C183.278 46.887 183.083 46.4503 182.695 46.142C182.306 45.8338 181.781 45.6797 181.12 45.6797C180.408 45.6797 179.836 45.8338 179.403 46.142C178.97 46.4503 178.695 46.8759 178.577 47.419L173.612 47.2429C173.759 46.2154 174.137 45.2981 174.746 44.4908C175.363 43.6761 176.207 43.0376 177.278 42.5753C178.357 42.1056 179.652 41.8707 181.164 41.8707C182.243 41.8707 183.238 41.9992 184.148 42.256C185.058 42.5056 185.85 42.8725 186.525 43.3569C187.201 43.8339 187.722 44.421 188.089 45.1183C188.463 45.8155 188.65 46.6117 188.65 47.5071V59H183.586V56.6442H183.454C183.153 57.2166 182.768 57.701 182.298 58.0973C181.836 58.4936 181.289 58.7908 180.658 58.989C180.034 59.1871 179.33 59.2862 178.544 59.2862ZM180.207 55.7635C180.786 55.7635 181.307 55.6461 181.77 55.4112C182.239 55.1764 182.614 54.8535 182.893 54.4425C183.172 54.0241 183.311 53.5398 183.311 52.9893V51.3821C183.157 51.4628 182.97 51.5362 182.75 51.6023C182.537 51.6683 182.302 51.7307 182.045 51.7894C181.788 51.8481 181.524 51.8995 181.252 51.9435C180.981 51.9876 180.72 52.0279 180.471 52.0646C179.964 52.1454 179.531 52.2701 179.172 52.4389C178.82 52.6077 178.548 52.8279 178.357 53.0994C178.174 53.3636 178.082 53.6792 178.082 54.0462C178.082 54.6039 178.28 55.0296 178.676 55.3232C179.08 55.6167 179.59 55.7635 180.207 55.7635ZM197.325 49.3565V59H191.942V42.0909H197.061V45.1953H197.248C197.622 44.1605 198.261 43.3495 199.163 42.7624C200.066 42.168 201.141 41.8707 202.389 41.8707C203.578 41.8707 204.609 42.1386 205.482 42.6744C206.363 43.2028 207.045 43.944 207.53 44.8981C208.021 45.8448 208.264 46.953 208.256 48.2227V59H202.873V49.2795C202.88 48.3401 202.642 47.6062 202.158 47.0778C201.681 46.5494 201.016 46.2852 200.165 46.2852C199.6 46.2852 199.101 46.4099 198.668 46.6594C198.242 46.9016 197.912 47.2502 197.677 47.7053C197.45 48.1603 197.332 48.7107 197.325 49.3565ZM222.499 51.7013V42.0909H227.871V59H222.741V55.8516H222.565C222.19 56.8864 221.552 57.7083 220.649 58.3175C219.754 58.9193 218.671 59.2202 217.402 59.2202C216.249 59.2202 215.237 58.956 214.363 58.4276C213.49 57.8991 212.811 57.1616 212.327 56.2148C211.842 55.2608 211.596 54.1452 211.589 52.8683V42.0909H216.972V51.8114C216.98 52.7288 217.222 53.4517 217.699 53.9801C218.176 54.5085 218.825 54.7727 219.647 54.7727C220.183 54.7727 220.664 54.6553 221.089 54.4205C221.522 54.1783 221.864 53.8297 222.113 53.3746C222.37 52.9123 222.499 52.3545 222.499 51.7013ZM231.297 65.3409V42.0909H236.625V44.9861H236.79C237.011 44.4724 237.322 43.977 237.726 43.5C238.137 43.023 238.658 42.634 239.289 42.3331C239.928 42.0249 240.691 41.8707 241.579 41.8707C242.753 41.8707 243.851 42.179 244.871 42.7955C245.898 43.4119 246.727 44.3623 247.359 45.6467C247.99 46.931 248.305 48.5676 248.305 50.5565C248.305 52.4719 248.001 54.0755 247.392 55.3672C246.79 56.6589 245.975 57.6276 244.948 58.2734C243.928 58.9193 242.794 59.2422 241.546 59.2422C240.695 59.2422 239.957 59.1027 239.333 58.8239C238.71 58.545 238.185 58.178 237.759 57.723C237.341 57.268 237.018 56.7799 236.79 56.2589H236.68V65.3409H231.297ZM236.57 50.5455C236.57 51.4555 236.691 52.2481 236.934 52.9233C237.183 53.5985 237.539 54.1232 238.001 54.4975C238.471 54.8645 239.032 55.0479 239.686 55.0479C240.346 55.0479 240.908 54.8645 241.37 54.4975C241.832 54.1232 242.181 53.5985 242.416 52.9233C242.658 52.2481 242.779 51.4555 242.779 50.5455C242.779 49.6354 242.658 48.8465 242.416 48.1786C242.181 47.5108 241.832 46.9934 241.37 46.6264C240.915 46.2595 240.353 46.076 239.686 46.076C239.025 46.076 238.464 46.2558 238.001 46.6154C237.539 46.975 237.183 47.4888 236.934 48.1566C236.691 48.8245 236.57 49.6207 236.57 50.5455ZM254.154 59.3192C253.361 59.3192 252.682 59.0404 252.117 58.4826C251.559 57.9248 251.284 57.2496 251.291 56.457C251.284 55.6791 251.559 55.0149 252.117 54.4645C252.682 53.9067 253.361 53.6278 254.154 53.6278C254.902 53.6278 255.563 53.9067 256.135 54.4645C256.715 55.0149 257.008 55.6791 257.016 56.457C257.008 56.9854 256.869 57.4661 256.597 57.8991C256.333 58.3321 255.985 58.6771 255.552 58.9339C255.126 59.1908 254.66 59.3192 254.154 59.3192ZM260.572 65.3409V42.0909H265.9V44.9861H266.065C266.285 44.4724 266.597 43.977 267.001 43.5C267.412 43.023 267.933 42.634 268.564 42.3331C269.202 42.0249 269.965 41.8707 270.854 41.8707C272.028 41.8707 273.125 42.179 274.145 42.7955C275.173 43.4119 276.002 44.3623 276.633 45.6467C277.264 46.931 277.58 48.5676 277.58 50.5565C277.58 52.4719 277.275 54.0755 276.666 55.3672C276.064 56.6589 275.25 57.6276 274.222 58.2734C273.202 58.9193 272.068 59.2422 270.82 59.2422C269.969 59.2422 269.232 59.1027 268.608 58.8239C267.984 58.545 267.459 58.178 267.034 57.723C266.615 57.268 266.292 56.7799 266.065 56.2589H265.955V65.3409H260.572ZM265.845 50.5455C265.845 51.4555 265.966 52.2481 266.208 52.9233C266.457 53.5985 266.813 54.1232 267.276 54.4975C267.745 54.8645 268.307 55.0479 268.96 55.0479C269.621 55.0479 270.182 54.8645 270.644 54.4975C271.107 54.1232 271.455 53.5985 271.69 52.9233C271.932 52.2481 272.053 51.4555 272.053 50.5455C272.053 49.6354 271.932 48.8465 271.69 48.1786C271.455 47.5108 271.107 46.9934 270.644 46.6264C270.189 46.2595 269.628 46.076 268.96 46.076C268.3 46.076 267.738 46.2558 267.276 46.6154C266.813 46.975 266.457 47.4888 266.208 48.1566C265.966 48.8245 265.845 49.6207 265.845 50.5455ZM280.401 59V42.0909H285.784V59H280.401ZM283.098 40.1204C282.342 40.1204 281.692 39.8709 281.149 39.3718C280.606 38.8654 280.335 38.2563 280.335 37.5444C280.335 36.8398 280.606 36.238 281.149 35.739C281.692 35.2326 282.342 34.9794 283.098 34.9794C283.861 34.9794 284.511 35.2326 285.046 35.739C285.589 36.238 285.861 36.8398 285.861 37.5444C285.861 38.2563 285.589 38.8654 285.046 39.3718C284.511 39.8709 283.861 40.1204 283.098 40.1204ZM297.103 59.3192C295.32 59.3192 293.79 58.9523 292.513 58.2184C291.243 57.4845 290.267 56.4644 289.585 55.158C288.902 53.8443 288.561 52.3252 288.561 50.6005C288.561 48.8685 288.902 47.3493 289.585 46.043C290.274 44.7293 291.254 43.7055 292.524 42.9716C293.801 42.2377 295.324 41.8707 297.092 41.8707C298.656 41.8707 300.017 42.1533 301.176 42.7184C302.343 43.2835 303.253 44.0835 303.907 45.1183C304.567 46.1457 304.916 47.353 304.952 48.7401H299.922C299.819 47.8741 299.525 47.1952 299.041 46.7035C298.564 46.2118 297.94 45.9659 297.169 45.9659C296.546 45.9659 295.999 46.142 295.529 46.4943C295.059 46.8393 294.692 47.353 294.428 48.0355C294.171 48.7107 294.043 49.5473 294.043 50.5455C294.043 51.5436 294.171 52.3875 294.428 53.0774C294.692 53.7599 295.059 54.2773 295.529 54.6296C295.999 54.9746 296.546 55.147 297.169 55.147C297.668 55.147 298.109 55.0406 298.49 54.8278C298.879 54.6149 299.199 54.303 299.448 53.892C299.698 53.4737 299.855 52.9673 299.922 52.3729H304.952C304.901 53.7673 304.552 54.9856 303.907 56.0277C303.268 57.0698 302.369 57.8808 301.21 58.4606C300.057 59.033 298.689 59.3192 297.103 59.3192ZM317.252 42.0909V46.054H306.584V42.0909H317.252ZM308.819 38.0398H314.202V53.6829C314.202 54.0131 314.254 54.281 314.356 54.4865C314.467 54.6847 314.624 54.8278 314.83 54.9158C315.035 54.9966 315.281 55.0369 315.567 55.0369C315.773 55.0369 315.989 55.0186 316.217 54.9819C316.452 54.9379 316.628 54.9012 316.745 54.8718L317.56 58.7578C317.303 58.8312 316.94 58.9229 316.47 59.033C316.008 59.1431 315.454 59.2128 314.808 59.2422C313.545 59.3009 312.463 59.1541 311.56 58.8018C310.665 58.4422 309.979 57.8845 309.502 57.1286C309.032 56.3726 308.804 55.4222 308.819 54.2773V38.0398ZM330.908 51.7013V42.0909H336.28V59H331.15V55.8516H330.974C330.6 56.8864 329.961 57.7083 329.058 58.3175C328.163 58.9193 327.08 59.2202 325.811 59.2202C324.659 59.2202 323.646 58.956 322.772 58.4276C321.899 57.8991 321.22 57.1616 320.736 56.2148C320.252 55.2608 320.006 54.1452 319.998 52.8683V42.0909H325.381V51.8114C325.389 52.7288 325.631 53.4517 326.108 53.9801C326.585 54.5085 327.235 54.7727 328.057 54.7727C328.592 54.7727 329.073 54.6553 329.499 54.4205C329.932 54.1783 330.273 53.8297 330.522 53.3746C330.779 52.9123 330.908 52.3545 330.908 51.7013ZM339.706 59V42.0909H344.935V45.1733H345.112C345.42 44.0578 345.922 43.2285 346.62 42.6854C347.317 42.1349 348.128 41.8597 349.053 41.8597C349.302 41.8597 349.559 41.8781 349.823 41.9148C350.087 41.9441 350.333 41.9918 350.561 42.0579V46.7365C350.304 46.6484 349.966 46.5787 349.548 46.5273C349.137 46.476 348.77 46.4503 348.447 46.4503C347.809 46.4503 347.232 46.5934 346.719 46.8796C346.212 47.1585 345.812 47.5511 345.519 48.0575C345.233 48.5566 345.089 49.1437 345.089 49.8189V59H339.706ZM359.78 59.3192C358.012 59.3192 356.485 58.9706 355.201 58.2734C353.924 57.5689 352.94 56.5671 352.251 55.2681C351.568 53.9618 351.227 52.4096 351.227 50.6115C351.227 48.8648 351.572 47.3383 352.262 46.032C352.951 44.7183 353.924 43.6982 355.179 42.9716C356.434 42.2377 357.913 41.8707 359.615 41.8707C360.819 41.8707 361.92 42.0579 362.918 42.4322C363.916 42.8065 364.778 43.3606 365.505 44.0945C366.231 44.8284 366.796 45.7347 367.2 46.8136C367.604 47.8851 367.806 49.1143 367.806 50.5014V51.8445H353.109V48.718H362.797C362.789 48.1456 362.654 47.6355 362.389 47.1879C362.125 46.7402 361.762 46.3916 361.3 46.142C360.845 45.8852 360.32 45.7567 359.725 45.7567C359.124 45.7567 358.584 45.8925 358.107 46.1641C357.63 46.4283 357.252 46.7915 356.973 47.2539C356.694 47.7089 356.548 48.2263 356.533 48.8061V51.9876C356.533 52.6774 356.669 53.2829 356.94 53.804C357.212 54.3177 357.597 54.7177 358.096 55.0039C358.595 55.2901 359.19 55.4332 359.879 55.4332C360.356 55.4332 360.789 55.3672 361.178 55.2351C361.567 55.103 361.901 54.9085 362.18 54.6516C362.459 54.3948 362.668 54.0792 362.808 53.7049L367.751 53.848C367.545 54.9562 367.094 55.9213 366.396 56.7433C365.707 57.5579 364.8 58.1927 363.677 58.6477C362.555 59.0954 361.256 59.3192 359.78 59.3192ZM385.317 47.2539L380.375 47.386C380.323 47.0337 380.184 46.7218 379.956 46.4503C379.729 46.1714 379.431 45.9549 379.065 45.8008C378.705 45.6393 378.287 45.5586 377.81 45.5586C377.186 45.5586 376.654 45.6834 376.213 45.9329C375.78 46.1824 375.568 46.52 375.575 46.9457C375.568 47.2759 375.7 47.5621 375.971 47.8043C376.25 48.0465 376.745 48.241 377.457 48.3878L380.716 49.0043C382.404 49.3272 383.659 49.8629 384.481 50.6115C385.31 51.3601 385.728 52.3509 385.736 53.5838C385.728 54.7434 385.383 55.7525 384.701 56.6112C384.026 57.4698 383.101 58.1377 381.927 58.6147C380.753 59.0844 379.409 59.3192 377.898 59.3192C375.483 59.3192 373.579 58.8239 372.184 57.8331C370.797 56.835 370.005 55.4993 369.806 53.826L375.123 53.6939C375.241 54.3104 375.545 54.7801 376.037 55.103C376.529 55.4259 377.156 55.5874 377.92 55.5874C378.61 55.5874 379.171 55.4589 379.604 55.2021C380.037 54.9452 380.257 54.6039 380.264 54.1783C380.257 53.7966 380.088 53.4921 379.758 53.2646C379.428 53.0297 378.91 52.8462 378.206 52.7141L375.256 52.1527C373.56 51.8445 372.298 51.2757 371.469 50.4464C370.639 49.6097 370.228 48.5456 370.236 47.2539C370.228 46.1237 370.529 45.1586 371.138 44.3587C371.748 43.5514 372.614 42.9349 373.736 42.5092C374.859 42.0836 376.184 41.8707 377.71 41.8707C380 41.8707 381.806 42.3514 383.127 43.3129C384.448 44.2669 385.178 45.5806 385.317 47.2539Z",fill:"black"})})]})}var Ke=["bag","table","paris","jacket","shoe"];function $e(e){var t=e.setOriginalFile,n=e.onFileChange,r=e.startWithDemoImage,a=e.setShowUpgrade,c=e.setShowSignin,i=Object(A.a)(),s=N();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"fixed w-full z-10",children:[Object(v.jsx)(Xe,{}),Object(v.jsxs)("header",{className:["w-full bg-white bg-opacity-70","filter backdrop-blur-3xl z-10 flex px-5 pt-3 pb-3","justify-between items-center sm:items-start"].join(" "),children:[Object(v.jsx)("div",{children:Object(v.jsx)("a",{href:"/#","aria-label":"Cleanup Logo",children:(null===s||void 0===s?void 0:s.isPro())?Object(v.jsx)(z,{className:"w-60 h-14"}):Object(v.jsx)(Ge,{className:"w-60 h-14"})})}),Object(v.jsxs)("div",{className:"flex items-center space-x-8",children:[Object(v.jsx)("a",{className:"hidden sm:inline-block hover:underline",href:"#usecases",children:"Use cases"}),Object(v.jsx)("a",{className:"hidden sm:inline-block hover:underline",href:"#pricing",children:"Pricing"}),Object(v.jsx)("a",{className:"hidden sm:inline-block hover:underline",href:"#faq",children:"FAQ"}),Object(v.jsx)("a",{className:"hidden sm:inline-block hover:underline",href:"#api",children:"API"}),Object(v.jsx)(He,{onUpgrade:function(){return a(!0)},onSignin:function(){return c(!0)}})]})]})]}),Object(v.jsxs)("main",{className:["flex flex-1 flex-col sm:items-center sm:justify-center overflow-hidden","sm:mt-10","pt-24 sm:pt-40","items-center justify-center","pb-10"].join(" "),children:[Object(v.jsxs)("div",{className:["flex flex-col sm:flex-row items-center","space-y-5 sm:space-y-0 sm:space-x-6 p-5 pt-0 pb-10"].join(" "),children:[Object(v.jsx)("div",{className:"sm:max-w-lg lg:max-w-2xl flex flex-col items-center sm:items-start p-0 m-0 space-y-5",children:Object(v.jsxs)("h1",{className:"text-center font-bold sm:text-left text-xl sm:text-3xl lg:text-5xl",children:["Remove any unwanted"," ",Object(v.jsx)("span",{className:"bg-primary font-varent rounded-l-full rounded-r-full px-2",children:"object"}),","," ",Object(v.jsx)("span",{className:"bg-primary font-varent rounded-l-full rounded-r-full px-2",children:"defect"}),","," ",Object(v.jsx)("span",{className:"bg-primary font-varent rounded-l-full rounded-r-full px-2",children:"people"})," ","or"," ",Object(v.jsx)("span",{className:"bg-primary font-varent rounded-l-full rounded-r-full px-2",children:"text"})," ","from your pictures"," ",Object(v.jsx)("span",{className:"underline font-varent",children:"in seconds"})]})}),Object(v.jsx)("div",{className:"w-60 sm:w-80 flex items-center rounded-xl overflow-hidden",children:Object(v.jsxs)("video",{className:"w-60 h-48 sm:w-80 sm:h-64 bg-gray-100 rounded-xl overflow-hidden",style:{transform:"scale(1.03, 1.03)"},autoPlay:!0,muted:!0,loop:!0,playsInline:!0,children:[Object(v.jsx)("source",{src:"https://storage.googleapis.com/cleanup-pictures.appspot.com/demo_small.mp4",type:"video/mp4"}),Object(v.jsx)("track",{kind:"captions"})]})})]}),Object(v.jsx)("div",{className:"h-20 sm:h-52 px-4 w-full my-8 sm:my-0",style:{maxWidth:"800px"},children:Object(v.jsx)(Ye,{onSelection:function(){var e=Object(d.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(r),n(r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(v.jsxs)("div",{className:["flex flex-col items-center justify-center cursor-pointer","pt-4 sm:pt-10"].join(" "),children:[Object(v.jsx)("span",{className:"mb-4",children:"\u2193 Try with an example"}),Object(v.jsx)("div",{className:"flex space-x-2 sm:space-x-4 px-4",children:Ke.slice(0,i.width>650?void 0:3).map((function(e){return Object(v.jsx)("div",{onClick:function(){return r(e)},role:"button",onKeyDown:function(){return r(e)},tabIndex:-1,children:Object(v.jsx)("img",{className:"rounded-md hover:opacity-75 w-24 h-24 object-cover",width:"96",height:"96",src:"exemples/".concat(e,".thumb.jpeg"),alt:e})},e)}))})]})]})]})}var qe=function(){var e=Le(),t=Object(r.useState)(new URLSearchParams(window.location.search).get("upgrade")),n=Object(b.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(null!==a&&"undefined"!==typeof a),s=Object(b.a)(i,2),o=s[0],l=s[1];Object(r.useEffect)((function(){var e=function(){return l(!0)};return document.addEventListener("@cleanup/display-upgrade-modal",e),function(){document.removeEventListener("@cleanup/display-upgrade-modal",e)}}),[]);var p=Object(r.useState)(!1),j=Object(b.a)(p,2),h=j[0],f=j[1],m=Object(r.useState)(!1),x=Object(b.a)(m,2),C=x[0],O=x[1],g=Object(r.useState)(!1),y=Object(b.a)(g,2),k=y[0],L=y[1],E=Object(r.useState)(),M=Object(b.a)(E,2),Z=M[0],V=M[1],P=N();Object(r.useEffect)((function(){e.file?document.body.classList.add("editor"):document.body.classList.remove("editor")}),[e.file]);var I=w();if(!I)return Object(v.jsx)(v.Fragment,{});function D(){return(D=Object(d.a)(u.a.mark((function t(n){var r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===I||void 0===I||I.logEvent("set_demo_file",{demo_image:n}),t.next=3,fetch("/exemples/".concat(n,".jpeg")).then((function(e){return e.blob()}));case 3:r=t.sent,a=new File([r],"".concat(n,".jpeg"),{type:"image/jpeg"}),e.setFile(a),e.setOriginalFile(a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(){return(R=Object(d.a)(u.a.mark((function t(n){var r,a,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(I){t.next=2;break}throw new Error("No firebase");case 2:return t.next=4,se(n);case 4:if(r=t.sent,I.logEvent("set_file",{originalWidth:r.width,originalHeight:r.height}),(null===P||void 0===P?void 0:P.isPro())||!(r.width>S||r.height>S)){t.next=9;break}return V(r),t.abrupt("return");case 9:return t.next=11,ce(n,H);case 11:a=t.sent,c=a.file,e.setFile(c);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function U(){return(U=Object(d.a)(u.a.mark((function t(){var n,r,a,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.originalFile){t.next=2;break}throw new Error("No original file");case 2:return t.next=4,ce(e.originalFile,S);case 4:n=t.sent,r=n.file,a=n.originalHeight,c=n.originalWidth,e.setFile(r),V(void 0),null===I||void 0===I||I.logEvent("downscale_and_continue",{originalWidth:c,originalHeight:a});case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(v.jsxs)("div",{className:["app min-h-full flex flex-col",e.file?"fixed w-full h-full overflow-hidden":""].join(" "),children:[e.file?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Ve,{useHD:e.useHD,refiner:e.refiner,setRefiner:e.setRefiner,onBack:function(){null===I||void 0===I||I.logEvent("start_new"),e.setOriginalFile(void 0),e.setFile(void 0)},setShowUpgrade:l,showOriginal:C,setShowOriginal:O,setShowSignin:f}),Object(v.jsx)(We,{showOriginal:C,setShowOriginal:O,showSeparator:k,setShowSeparator:L})]}):Object(v.jsx)($e,{setOriginalFile:e.setOriginalFile,onFileChange:function(e){return function(e){return R.apply(this,arguments)}(e)},startWithDemoImage:function(e){return D.apply(this,arguments)},setShowUpgrade:l,setShowSignin:f}),Z&&Object(v.jsx)(F,{onClose:function(){null===I||void 0===I||I.logEvent("close_downscale_modal"),V(void 0),e.setFile(void 0),e.setOriginalFile(void 0)},onDownscale:function(){return U.apply(this,arguments)},onUpgrade:function(){return l(!0)},image:Z}),o&&Object(v.jsx)(X,{onClose:function(){null===I||void 0===I||I.logEvent("upgrade_close"),window.history.pushState({},document.title,"/"),c(null),l(!1)},screen:a,isProUser:null===P||void 0===P?void 0:P.isPro()}),h&&Object(v.jsx)(_,{onClose:function(){return f(!1)}})]})};n(112);i.a({dsn:"https://56863720f30d4d5e91957f478af9d52f@o463841.ingest.sentry.io/6705739",integrations:[new o.a],tracesSampleRate:.1});var Je=document.createElement("div");Je.id="root",document.body.prepend(Je),c.a.render(Object(v.jsx)(r.StrictMode,{children:Object(v.jsx)(s.a,{fallback:Object(v.jsx)("p",{children:"An error has occurred"}),children:Object(v.jsx)(g,{children:Object(v.jsx)(Oe,{children:Object(v.jsx)(L,{children:Object(v.jsx)(ke,{children:Object(v.jsx)(qe,{})})})})})})}),Je)}},[[116,1,2]]]);
//# sourceMappingURL=main.03e6ee93.chunk.js.map